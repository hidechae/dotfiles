<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>PDO 関数</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.pdf-utf8-to-utf16.html">PDF_utf8_to_utf16</a></div>
 <div class="next" style="float: right;"><a href="function.PDO-beginTransaction.html">PDO->beginTransaction()</a></div>
 <div class="up"><a href="funcref.html">関数リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
  <h1 class="title">PDO 関数</h1>
  

  <div class="partintro">
   <div id="pdo.intro" class="section">
    <h2 class="title">導入</h2>
    <p class="para">
     PHP Data Objects (PDO) 拡張モジュールは、
     PHP の中からデータベースにアクセスするための軽量で高性能な
     インターフェイスを定義します。
     PDO インターフェイスを実装する各データベースドライバは、
     正規表現関数のようなデータベース固有の機能を提供することができます。
     PDO 拡張モジュールによりそのデータベースの全てのデータベース関数を
     実行できるわけではないことに注意してください。
     データベースサーバにアクセスするには、
     <a href="ref.pdo.html#pdo.drivers" class="link">データベース固有の PDO ドライバ</a>
     を使用する必要があります。
    </p>
    <p class="para">
     PDO は、<em class="emphasis">データアクセス</em>の抽象化レイヤを提供します。
     つまり、使用しているデータベースが何であるかにかかわらず、同じ
     関数を使用してクエリの発行やデータの取得が行えるということです。
     PDO は、<em class="emphasis">データベース</em>の抽象化を行うのでは
     <em class="emphasis">ありません</em>。つまり、SQL を書き直したり
     存在しない機能をエミュレートしたりはしないということです。
     もしそのような機能が必要なら、全体を網羅する (full-blown)
     別の抽象化レイヤを使用すべきです。
    </p>
    <p class="para">
     PDO は PHP 5.1 以降にバンドルされており、PHP 5.0 では PECL
     拡張モジュールとして使用可能です。PDO は PHP 5 の新機能である
     オブジェクト指向機能を使用しており、それより前のバージョンの
     PHP では動作しません。
    </p>
   </div>
   
   



<div id="pdo.installation" class="section">
 <h2 class="title">インストール手順</h2>
 <div class="procedure">
  <b class="title">Unix システム上での PHP 5.1 以降</b>
  <ol type="1"><li>
   <p class="para">
    PHP 5.1 を動作させているのならば、PDO および
    <a href="ref.pdo-sqlite.html" class="link">PDO_SQLITE</a>
    はその配布物の中に含まれています。configure を実行した際に PDO
    は自動的に有効になります。
    PDO は、共有モジュールとしてビルドすることを推奨します。
    なぜなら、PECL からアップデート版を導入する際にそのほうが有利だからです。
    PHP を PDO サポート込みでビルドする際の推奨設定は、
    zlib サポートを有効にする (pecl インストーラを使用するため) ことです。
    また、あなたが選択したデータベースについての PDO ドライバを有効にする必要もあります。
    詳細については<a href="ref.pdo.html#pdo.drivers" class="link">データベース固有の PDO ドライバ</a>
    を参照ください。PDO を共有モジュールとしてビルドした場合は、
    PDO ドライバも共有モジュールとしてビルドする必要があることに注意しましょう。
    SQLite 拡張モジュールは PDO に依存しています。そのため、PDO
    を共有モジュールとしてビルドした場合には SQLite も同じようにビルドしなければなりません。
    <div class="example-contents"><pre>
<div class="cdata"><pre>
./configure --with-zlib --enable-pdo=shared --with-pdo-sqlite=shared --with-sqlite=shared
</pre></div>
    </pre></div>
   </p>
  </li>
  <li>
   <p class="para">
    PDO を共有モジュールとしてインストールした後は、PHP の実行時に
    PDO 拡張モジュールが自動的に読み込まれるよう、php.ini
    ファイルを編集する必要があります。
    また同様に、データベース固有のドライバについてもここで有効にする必要があります。
    この設定は pdo.so の行より後で記述するようにしましょう。なぜなら、
    データベース固有のドライバが読み込まれるためには、それ以前に
    PDO が初期化されていなければならないからです。
    PDO およびデータベース固有のドライバを静的にビルドしたのならば、
    この設定は不要です。
    <div class="example-contents"><pre>
<div class="cdata"><pre>
extension=pdo.so
</pre></div>
    </pre></div>
   </p>
  </li>
  <li>
   <p class="para">
    PDO を共有モジュールとしてビルドすると、新しいバージョンの PDO
    が公開された際に <strong class="command">pecl upgrade pdo</strong>
    コマンドで更新することができるようになります。
    その際に PHP 自体を再ビルドする必要はありません。注意すべき点として、
    PDO をこの方法で更新した際はデータベース固有のドライバも同時に更新するようにしてください。
   </p>
  </li>
 </ol></div>
 <div class="procedure">
  <b class="title">Unix システム上での PHP 5.0.0 以降</b>
  <ol type="1"><li>
   <p class="para">
    PDO は、
    <a href="http://pecl.php.net/package/pdo" class="link external">&raquo; http://pecl.php.net/package/pdo</a>
    から PECL 拡張モジュールとして使用可能です。
    <strong class="command">pecl</strong> ツールを使用してインストールを行います。
    このツールは、PHP の configure 時に自動的に使用可能になります。
    <strong class="command">pecl</strong> が圧縮されたパッケージを取り扱えるよう、
    PHP が --with-zlib を含めて confiure されていることを
    確認しておきましょう。
   </p>
  </li>
  <li>
   <p class="para">
    以下のコマンドにより、最新の安定版の PDO
    をダウンロードしてビルドを行い、そしてインストールします。
    <div class="example-contents"><pre>
<div class="cdata"><pre>
pecl install pdo
</pre></div>
    </pre></div>
   </p>
  </li>
  <li>
   <p class="para">
    <strong class="command">pecl</strong> コマンドは、PDO モジュールを自動的に
    PHP のエクステンションディレクトリにインストールします。
    Linux や Unix 上で PDO を有効にするには、以下の行を
    <var class="filename">php.ini</var> に追加する必要があります。
    <div class="example-contents"><pre>
<div class="cdata"><pre>
extension=pdo.so
</pre></div>
    </pre></div>
   </p>
   <p class="para">
    PECL パッケージのビルド方法についてのより詳細な情報は、マニュアルの
    <a href="install.pecl.html" class="link">PECL 拡張モジュールのインストール</a>
    を参照ください。
   </p>
  </li>
 </ol></div>
 <div class="procedure">
  <b class="title">PHP 5.1.0 以降を使用している Windows ユーザ</b>
  <ol type="1"><li>
   <p class="para">
    PDO および主要データベースのドライバは、共有モジュールとして
    PHP に同梱されています。これを使用するには、単に
    <var class="filename">php.ini</var> ファイルを編集するだけです。
    <div class="example-contents"><pre>
<div class="cdata"><pre>
extension=php_pdo.dll
</pre></div>
    </pre></div>
   </p>
  </li>
  <li>
   <p class="para">
    次に、その他のデータベース固有の DLL ファイルを選択します。
    実行時に <a href="function.dl.html" class="function">dl()</a> によりロードするか、または、
    <var class="filename">php.ini</var> の <var class="filename">php_pdo.dll</var> の下で有効にしてください。
    例えば、以下のようになります。
    <div class="example-contents"><pre>
<div class="cdata"><pre>
extension=php_pdo.dll
extension=php_pdo_firebird.dll
extension=php_pdo_informix.dll
extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll
extension=php_pdo_oci.dll
extension=php_pdo_oci8.dll
extension=php_pdo_odbc.dll
extension=php_pdo_pgsql.dll
extension=php_pdo_sqlite.dll
</pre></div>
    </pre></div>
   </p>
   <p class="para">
    これらの DLL は、システムの <a href="ini.core.html#ini.extension-dir" class="link">extension_dir</a>
    で指定した場所に存在する必要があります。
    <a href="ref.pdo-informix.html" class="link">PDO_INFORMIX</a>
    は PECL 拡張モジュールにのみ存在することに注意しましょう。
   </p>
  </li>
 </ol></div>
</div>





   


<div id="pdo.configuration" class="section">
 <h2 class="title">実行時設定</h2>
 <p class="simpara">
<var class="filename">php.ini</var> の設定により動作が変化します。
</p>
 <p class="para">
  <table border="5">
   <caption><b>PDO 設定オプション</b></caption>
   <colgroup>

    <thead valign="middle">
     <tr valign="middle">
      <th colspan="1">名前</th>
      <th colspan="1">デフォルト</th>
      <th colspan="1">変更の可否</th>
      <th colspan="1">変更履歴</th>
     </tr>

    </thead>

    <tbody valign="middle">
     <tr valign="middle">
      <td colspan="1" rowspan="1" align="left">pdo.dsn.*</td>
      <td class="empty">&nbsp;</td>
      <td colspan="1" rowspan="1" align="left"><var class="filename">php.ini</var> only</td>
      <td class="empty">&nbsp;</td>
     </tr>

    </tbody>
   </colgroup>

  </table>

  PHP_INI_* 定数の詳細および定義については
<a href="ini.html" class="xref">php.ini ディレクティブ</a> を参照してください。
</p>

<p class="para">以下に設定ディレクティブに関する
簡単な説明を示します。</p>

<p class="para">
 <dl>

  <dt id="ini.pdo.dsn">
   <span class="term">
    <i><tt class="parameter">pdo.dsn.*</tt></i>

    <a href="language.types.string.html" class="type string">string</a>
   </span>
   <dd>

    <p class="para">
     DSN の別名を定義します。完全な説明については
     <a href="function.PDO-construct.html" class="xref">PDO->__construct()</a> を参照ください。
    </p>
   </dd>

  </dt>


 </dl>

 </p>
</div>




   <div id="pdo.drivers" class="section">
    <h2 class="title">PDO ドライバ</h2>
    <p class="para">
     以下のドライバが現在 PDO インターフェイスを実装しています。
     <table class="informaltable">
      <colgroup>

       <thead valign="middle">
        <tr valign="middle">
         <th colspan="1">ドライバ名</th>
         <th colspan="1">サポートされるデータベース</th>
        </tr>

       </thead>

       <tbody valign="middle">
        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-dblib.html" class="link">PDO_DBLIB</a></td>
         <td colspan="1" rowspan="1" align="left">FreeTDS / Microsoft SQL Server / Sybase</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-firebird.html" class="link">PDO_FIREBIRD</a></td>
         <td colspan="1" rowspan="1" align="left">Firebird/Interbase 6</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-ibm.html" class="link">PDO_IBM</a></td>
         <td colspan="1" rowspan="1" align="left">IBM DB2</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-informix.html" class="link">PDO_INFORMIX</a></td>
         <td colspan="1" rowspan="1" align="left">IBM Informix Dynamic Server</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-mysql.html" class="link">PDO_MYSQL</a></td>
         <td colspan="1" rowspan="1" align="left">MySQL 3.x/4.x/5.x</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-oci.html" class="link">PDO_OCI</a></td>
         <td colspan="1" rowspan="1" align="left">Oracle Call Interface</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-odbc.html" class="link">PDO_ODBC</a></td>
         <td colspan="1" rowspan="1" align="left">ODBC v3 (IBM DB2、unixODBC そして win32 ODBC)</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-pgsql.html" class="link">PDO_PGSQL</a></td>
         <td colspan="1" rowspan="1" align="left">PostgreSQL</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><a href="ref.pdo-sqlite.html" class="link">PDO_SQLITE</a></td>
         <td colspan="1" rowspan="1" align="left">SQLite 3 と SQLite 2</td>
        </tr>

       </tbody>
      </colgroup>

     </table>
    </p>
   </div>

   <div id="pdo.connections" class="section">
    <h2 class="title">接続、および接続の管理</h2>
    <p class="para">
     PDO 基底クラスのインスタンスを作成することにより、接続が確立されます。
     どのドライバを使用するのかにかかわらず、常に PDO クラスを指定します。
     コンストラクタに渡す引数により、データソース (いわゆる DSN) の指定や
     (もしあれば、オプションで) ユーザ名およびパスワードの指定を行います。
    </p>
    <p class="para">
     <div class="example"><p><b>Example#1 MySQL への接続</b></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql:host=localhost;dbname=test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div> 
      </div>

     </div>
    </p>
    <p class="para">
     接続時になんらかのエラーが発生した場合、<i class="literal">PDOException</i>
     オブジェクトがスローされます。エラー処理を行いたい場合はこの例外を
     キャッチします。あるいはこれを無視して、
     <a href="function.set-exception-handler.html" class="function">set_exception_handler()</a> で設定した
     グローバル例外ハンドラに処理を任せることもできます。
    </p>
    <p class="para">
     <div class="example"><p><b>Example#2 接続エラーの処理</b></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql:host=localhost;dbname=test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">query</span><span style="color: #007700">(</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;from&nbsp;FOO'</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #DD0000">"エラー!:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">()&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;br/&gt;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;die();<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <div class="warning"><b class="warning">警告</b>
     <p class="para">
      PDO コンストラクタからの例外をアプリケーション内でキャッチしない場合、
      zend エンジンはスクリプトの実行を終了し、バックトレースを表示します。
      このバックトレースを見れば、データベースへの接続の詳細がわかってしまいます。
      その中にはユーザ名やパスワードも含まれます。
      (<i class="literal">catch</i> 文を使用して) 明示的に例外をキャッチするか、
      あるいは <a href="function.set-exception-handler.html" class="function">set_exception_handler()</a> を使用して
      暗黙的に例外をキャッチするようにしましょう。
     </p>
    </div>
    <p class="para">
     データベースへの接続に成功すると、PDO クラスのインスタンスが
     スクリプトに返されます。この PDO オブジェクトが存在する間、
     接続がアクティブであり続けます。接続を閉じるには、他から
     参照されていないことを保障することでオブジェクトを破棄する
     必要があります。それには、オブジェクトを保持している変数に対して
     <b><tt>NULL</tt></b> を代入します。
     明示的にこれを行わなかった場合は、スクリプトの終了時に自動的に
     接続が閉じられます。
    </p>
    <p class="para">
     <div class="example"><p><b>Example#3 接続を閉じる</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql:host=localhost;dbname=test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;ここで接続を使用します<br /><br /><br />//&nbsp;使用を終了したので、閉じます<br /></span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    データベースサーバへの持続的な接続による恩恵をこうむる web
    アプリケーションは多いでしょう。持続的な接続は、スクリプトが
    終了しても閉じられずにキャッシュされ、他のスクリプトが同じ内容の
    接続を要求してきた際にそれが再利用されます。持続的接続の
    キャッシュにより、スクリプトがデータベースを使用するたびに
    新しい接続を確立するオーバーヘッドを避けることができます。
    それにより、結果として web アプリケーションを高速化できるように
    なります。
   </p>
   <p class="para">
    <div class="example"><p><b>Example#4 持続的な接続</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysql:host=localhost;dbname=test'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$pass</span><span style="color: #007700">,&nbsp;array(<br />&nbsp;&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_PERSISTENT&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true<br /></span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     </div>
    </p>
    <blockquote><p><b class="note">注意</b>: 
     
      持続的な接続を使用したい場合は、ドライバのオプションを表す配列に
      <b><tt>PDO::ATTR_PERSISTENT</tt></b> を設定して
      PDO のコンストラクタに渡す必要があります。この属性を
      <a href="function.PDO-setAttribute.html" class="xref">PDO->setAttribute()</a>
      を用いてインスタンス作成後に設定した場合は、
      そのドライバは持続的な接続を使用しません。
     <br />
    </p></blockquote>
    <blockquote><p><b class="note">注意</b>: 
     
      PDO ODBC ドライバを使用しており、ODBC ライブラリが ODBC
      接続プーリングをサポートしている場合 (unixODBC および Windows
      はこれをサポートしています。他にもあるかもしれません) は、
      PDO の持続的接続を使用せずに ODBC の接続プーリングに
      接続キャッシュ処理を任せることを推奨します。
      ODBC の接続プールは、プロセス内で他のモジュールと共有されています。
      PDO が接続をキャッシュしてしまうと、その接続は ODBC の
      接続プールに返されなくなり、他のモジュールによって新たな接続が
      作成されてしまうようになります。
     <br />
    </p></blockquote>
   </div>

   <div id="pdo.transactions" class="section">
    <h2 class="title">トランザクションおよび自動コミット</h2>
    <p class="para">
     さあ、PDO を使用してデータベースに接続することができました。
     クエリを発行する前に、PDO がトランザクションをどのように扱うのかを
     理解しなければなりません。トランザクションについてよくわからない方の
     ために説明すると、これは以下の 4 つの機能、つまり
     原子性 - Atomicity、一貫性 - Consistency、独立性 - Isolation および
     永続性 - Durability (ACID) を提供するものです。
     一般的な言葉で言うと、トランザクション内で実行された作業は
     たとえ段階的に行われたものであってもデータベースに安全に反映される
     ことが保証されています。トランザクションのコミット時に他の接続の
     干渉を受けることはありません。また、トランザクション内での作業は
     (まだコミットされていなければ) いつでも自動的に取り消すことが
     できます。これにより、スクリプト内でのエラー処理がより楽になります。
    </p>
    <p class="para">
     トランザクションの一般的な実装は、変更内容を一時的に「蓄えて」おき、
     それを一気に適用するようになっています。この実装には、更新処理の
     性能を劇的に向上させるという効果もあります。つまり、
     トランザクションによってあなたの書くスクリプトはより高速になり、
     またより堅牢になるということです
     (これらの恩恵をうけるためには、トランザクションを正しく使用する
     必要があります)。
    </p>
    <p class="para">
     残念ながら、すべてのデータベースがトランザクションをサポートしていると
     いうわけではありません。そのため、PDO で最初に接続をオープンした際には、
     いわゆる「自動コミット」モードで動作します。自動コミットモードとは、
     もしデータベースがトランザクションをサポートしていたら個々のクエリが
     暗黙的なトランザクションのもとで実行され、サポートしていなかったら
     トランザクションを使用せずに実行されることを意味します。
     トランザクションを使用する場合は、
     <a href="function.PDO-beginTransaction.html" class="xref">PDO->beginTransaction()</a> メソッドを使用して
     トランザクションを初期化する必要があります。使用しているドライバが
     トランザクションをサポートしていない場合は PDOException が
     スローされます (これは深刻な状態であるため、エラー処理の設定に
     かかわらず常にスローされます)。初期化した後でトランザクションを
     終了させるには、トランザクション内でのコードが成功したか否かに応じて
     <a href="function.PDO-commit.html" class="xref">PDO->commit()</a> あるいは
     <a href="function.PDO-rollBack.html" class="xref">PDO->rollBack()</a> を使用します。
    </p>
    <p class="para">
     スクリプトが終了したり接続が閉じられようとした際に、もし処理が
     完了していないトランザクションがあれば PDO が自動的に
     ロールバックします。これは、スクリプトが予期せぬ状態で終了した場合に
     データの不整合が発生するのを避けるための安全装置です。もし
     明示的にコミットしていなければ、おそらく何かおかしなことが
     起こったのだろうと推測されます。そのため、データを守るために
     ロールバックが行われるのです。
    </p>
    <div class="warning"><b class="warning">警告</b>
     <p class="para">
      自動的にロールバックが行われるのは、トランザクションを
      <a href="function.PDO-beginTransaction.html" class="xref">PDO->beginTransaction()</a> で開始した場合のみです。
      トランザクションを開始するクエリを手動で発行した場合、
      PDO はそれを知ることができません。そのため、何か問題が発生しても
      ロールバックすることはできないのです。
     </p>
    </div>
    <p class="para">
     <div class="example"><p><b>Example#5 トランザクション内で一括処理を行う</b></p>
      <div class="example-contents"><p>
       以下の例では、新しい従業員のデータを作成しているものとします。
       この従業員には ID 番号 23 を割り当てます。この人物についての
       基礎データを入力するだけでなく、その給与についても登録する
       必要があります。以下では単純に 2 つの別々の更新を行っていますが、
       それらは <a href="function.PDO-beginTransaction.html" class="xref">PDO->beginTransaction()</a> および
       <a href="function.PDO-commit.html" class="xref">PDO->commit()</a> のコールで囲まれています。
       これにより、変更が完了するまでは他からは一切変更内容が
       見えないことが保証されます。もし何か問題が発生すれば、
       catch ブロック内でトランザクション開始以降のすべての変更が
       ロールバックされます。そしてエラーメッセージを表示します。
      </p></div>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">try&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'odbc:SAMPLE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_PERSISTENT&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"接続しました\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setAttribute</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_ERRMODE</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ERRMODE_EXCEPTION</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beginTransaction</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"insert&nbsp;into&nbsp;staff&nbsp;(id,&nbsp;first,&nbsp;last)&nbsp;values&nbsp;(23,&nbsp;'Joe',&nbsp;'Bloggs')"</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">exec</span><span style="color: #007700">(</span><span style="color: #DD0000">"insert&nbsp;into&nbsp;salarychange&nbsp;(id,&nbsp;amount,&nbsp;changedate)&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;(23,&nbsp;50000,&nbsp;NOW())"</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">commit</span><span style="color: #007700">();<br />&nbsp;&nbsp;<br />}&nbsp;catch&nbsp;(</span><span style="color: #0000BB">Exception&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rollBack</span><span style="color: #007700">();<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"失敗しました。"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     トランザクション内で行える処理は、更新には限りません。たとえば
     何か複雑なクエリを発行してデータを抽出し、その情報をもとに
     データの更新をしたり別のクエリを実行したりすることも可能です。
     トランザクションがアクティブな間は、作業中のデータについては
     他から一切変更が加えられないことが保証されます。
     実際のところこの説明は 100% 正確というわけではありませんが、
     もしあなたがいままでトランザクションのことを知らなかったのであれば
     このように理解しておけば十分でしょう。
    </p>
   </div>

   <div id="pdo.prepared-statements" class="section">
    <h2 class="title">プリペアドステートメントおよびストアドプロシージャ</h2>
    <p class="para">
     より成熟したデータベースの多くは、プリペアドステートメントという
     概念をサポートしています。プリペアドステートメントとはいったい何の
     ことでしょう? これは、実行したい SQL をコンパイルした
     一種のテンプレートのようなものです。パラメータ変数を使用することで
     SQL をカスタマイズすることが可能です。プリペアドステートメントには
     2 つの大きな利点があります。
    </p>
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       クエリのパース (あるいは準備) が必要なのは最初の一回だけで、
       同じパラメータ (あるいは別のパラメータ) を指定して何度でも
       クエリを実行することができます。クエリを実行するには、準備として
       クエリの解析やコンパイル、そして実行プランの最適化が行われます。
       クエリが複雑になると、この処理には時間がかかるようになります。
       同じクエリを異なったパラメータで何度も実行すると、アプリケーションの
       動作は目に見えて遅くなるでしょう。
       プリペアドステートメントを使用すると、この
       解析/コンパイル/最適化 の繰り返しを避けることができます。
       端的に言うと、プリペアドステートメントは使用するリソースが少なくいため
       高速に動作するということです。
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       プリペアドステートメントに渡すパラメータは、引用符で括る必要は
       ありません。それはドライバが自動的に行います。
       アプリケーションで明示的にプリペアドステートメントを使用するように
       すれば、SQL インジェクションは決して発生しません
       (しかし、もし信頼できない入力をもとにクエリの他の部分を構築している
       のならば、その部分に対するリスクを負うことになります)。
      </span>
     </li>
    </ul>
    <p class="para">
     プリペアドステートメントは非常に有用な機能なので、もしドライバが
     サポートしていなくても、例外的に PDO がこの機能をエミュレートします。
     これにより、データベースの機能にかかわらず同じ仕組みで
     データベースへのアクセスができることが保証されます。
    </p>
    <p class="para">
     <div class="example"><p><b>Example#6 プリペアドステートメントを使用して、繰り返し挿入処理を行う</b></p>
     <div class="example-contents"><p>
      この例は、<i class="literal">name</i> および <i class="literal">value</i>
      を名前つきプレースホルダで置き換えて INSERT クエリを実行します。
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;REGISTRY&nbsp;(name,&nbsp;value)&nbsp;VALUES&nbsp;(:name,&nbsp;:value)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':name'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #DD0000">':value'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;行を挿入します<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'one'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;パラメータを変更し、別の行を挿入します<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'two'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
    <p class="para">
     <div class="example"><p><b>Example#7 プリペアドステートメントを使用して、繰り返し挿入処理を行う</b></p>
     <div class="example-contents"><p>
      この例は、<i class="literal">name</i> および <i class="literal">value</i>
      をプレースホルダ <i class="literal">?</i> で置き換えて INSERT クエリを実行します。
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT&nbsp;INTO&nbsp;REGISTRY&nbsp;(name,&nbsp;value)&nbsp;VALUES&nbsp;(?,&nbsp;?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$name</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;行を挿入します<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'one'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;パラメータを変更し、別の行を挿入します<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'two'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
    <p class="para">
     <div class="example"><p><b>Example#8 プリペアドステートメントを使用してデータを取得する</b></p>
     <div class="example-contents"><p>
      この例では、フォームで入力したキーの値に応じたデータを取得します。
      ユーザの入力内容は自動的に引用符で括られるので、SQL インジェクション攻撃の
      恐れはありません。
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;REGISTRY&nbsp;where&nbsp;name&nbsp;=&nbsp;?"</span><span style="color: #007700">);<br />if&nbsp;(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">])))&nbsp;{<br />&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">);<br />&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    データベースドライバがサポートしていれば、入力パラメータだけでなく
    出力パラメータもバインドすることが可能です。出力パラメータは、
    一般にストアドプロシージャから値を受け取るために使用します。この場合、
    返される値の大きさがどの程度になるのかをバインド時に知っておく必要が
    あります。指定した大きさよりも大きな値が返されると、エラーが発生します。
   </p>

   <p class="para">
    <div class="example"><p><b>Example#9 出力パラメータを指定してストアドプロシージャをコールする</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"CALL&nbsp;sp_returns_string(?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$return_value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4000</span><span style="color: #007700">);&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;ストアドプロシージャをコールします<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br />print&nbsp;</span><span style="color: #DD0000">"プロシージャが返した値は&nbsp;$return_value&nbsp;です\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>

   <p class="para">
    入出力の両方に使用するパラメータを指定することもできます。
    このパラメータの書式は、出力パラメータと同じです。
    次の例では、ストアドプロシージャに文字列 &#039;hello&#039; を渡しています。
    プロシージャの結果が返ってくると、
    この文字列はプロシージャの返す値に置き換えられます。
   </p>

   <p class="para">
    <div class="example"><p><b>Example#10 入出力パラメータを指定してストアドプロシージャをコールする</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"CALL&nbsp;sp_takes_string_returns_string(?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$value&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'hello'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$value</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">|</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_INPUT_OUTPUT</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4000</span><span style="color: #007700">);&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;ストアドプロシージャをコールします<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br />print&nbsp;</span><span style="color: #DD0000">"プロシージャが返した値は&nbsp;$value&nbsp;です\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    <div class="example"><p><b>Example#11 プレースホルダの間違った使用法</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;REGISTRY&nbsp;where&nbsp;name&nbsp;LIKE&nbsp;'%?%'"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'name'</span><span style="color: #007700">]));<br /><br /></span><span style="color: #FF8000">//&nbsp;プレースホルダは、値全体に対して使用しなければなりません<br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;REGISTRY&nbsp;where&nbsp;name&nbsp;LIKE&nbsp;?"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #DD0000">"%$_GET[name]%"</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
  </div>

  <div id="pdo.error-handling" class="section">
   <h2 class="title">エラーおよびエラー処理</h2>
    <p class="para">
     PDO が提供するエラー処理方法は 3 通り存在し、
     アプリケーションの開発形態によって使い分けることができます。
    </p>
    <ul class="itemizedlist">
     <li class="listitem">
      <p class="para">
       <b><tt>PDO::ERRMODE_SILENT</tt></b>
      </p>
      <p class="para">
        デフォルトのモードです。ステートメントおよびデータベースオブジェクトの
        エラーについて、PDO は単にそのエラーコードのみを設定します。
        これを取得するには <a href="function.PDO-errorCode.html" class="xref">PDO->errorCode()</a> および
        <a href="function.PDO-errorInfo.html" class="xref">PDO->errorInfo()</a> メソッドを使用します。
        ステートメントオブジェクトへのコールによってエラーが発生した場合は、
        そのオブジェクトの
        <a href="function.PDOStatement-errorCode.html" class="xref">PDOStatement->errorCode()</a> あるいは
        <a href="function.PDO-errorInfo.html" class="xref">PDO->errorInfo()</a> メソッドを呼び出します。
        データベースオブジェクトへのコールによってエラーが発生した場合は、
        その代わりにデータベースオブジェクト上の同じメソッドを呼び出します。
       </p>
     </li>
     <li class="listitem">
      <p class="para">
       <b><tt>PDO::ERRMODE_WARNING</tt></b>
      </p>
      <p class="para">
        エラーコードを設定することに加え、PDO は 伝統的な E_WARNING
        メッセージも出力します。この設定はデバッグ/テストの際に有用で、
        アプリケーションの動作を妨げることなしに問題点を確認できるように
        なります。
       </p>
      </li>
      <li class="listitem">
       <p class="para">
        <b><tt>PDO::ERRMODE_EXCEPTION</tt></b>
       </p>
       <p class="para">
        エラーコードを設定することに加え、PDO は
        <span class="classname">PDOException</span> をスローします。エラーコードや
        関連情報が、クラスのプロパティとして設定されます。
        この設定もまたデバッグ時に有用で、エラーが発生した時点で
        スクリプトの実行を停止させることによりコード内の問題点を
        見つけやすくなります
        (例外によりスクリプトが終了した際には、トランザクションは自動的に
        ロールバックされることを覚えておきましょう)。
       </p>
       <p class="para">
        このモードが有用である理由のひとつとして、伝統的な PHP 形式の警告よりも
        より明確にエラー処理コードが書けることがあります。例外を発生させず、
        データベースへのコールのたびに毎回明示的に返り値をチェックすることに
        比べると、コードの量やネストを減らすことができます。
       </p>
       <p class="para">
        PHP の例外についての詳細な情報は、
        <a href="language.exceptions.html" class="link">例外</a>
        を参照ください。
       </p>
      </li>
    </ul>
    <p class="para">
     PDO のエラーコードは、SQL-92 の SQLSTATE エラーコード文字列に
     標準化されています。
     ネイティブのコードを適切な SQLSTATE コードに変換するのは、個々の PDO
     ドライバの仕事となります。
     <a href="function.PDO-errorCode.html" class="xref">PDO->errorCode()</a> メソッドは SQLSTATE コードを返します。
     エラーについての詳細な銃尾法が知りたい場合、PDO では
     <a href="function.PDO-errorInfo.html" class="xref">PDO->errorInfo()</a> メソッドも提供しており、
     これは SQLSTATE コード、ドライバ固有のエラーコードおよびドライバ固有の
     エラーメッセージを含む配列を返します。
    </p>
   </div>

   <div id="pdo.lobs" class="section">
    <h2 class="title">ラージオブジェクト (LOB)</h2>
    <p class="para">
      アプリケーション内で、データベースに「大きな」データを格納する
      必要を感じることがあるかもしれません。「大きな」とは、一般的には
      「4kb 程度以上」を指しますが、データベースによっては 32kb くらいまでは
      「大きい」と判断されずにすむこともあります。ラージオブジェクトは
      テキストあるいはバイナリの両方の形式をとり得ます。
      PDO でこのラージデータ型を扱うには、
      <a href="function.PDOStatement-bindParam.html" class="xref">PDOStatement->bindParam()</a> や
      <a href="function.PDOStatement-bindColumn.html" class="xref">PDOStatement->bindColumn()</a> のコール時に
      型コードとして <b><tt>PDO::PARAM_LOB</tt></b> を使用します。
      <b><tt>PDO::PARAM_LOB</tt></b> を指定すると、PDO は
      データをストリームにマップします。これにより、
      <a href="ref.stream.html" class="link">PHP ストリーム API</a>
      を使用してデータを扱えるようになります。
    </p>
    <p class="para">
     
    </p>
    <p class="para">
     <div class="example"><p><b>Example#12 データベース内の画像を表示する</b></p>
     <div class="example-contents"><p>
      この例では $lob という名前の変数に LOB をバインドし、
      <a href="function.fpassthru.html" class="function">fpassthru()</a> を使用してそれをブラウザに送信します
      LOB はストリームで表されるので、
      <a href="function.fgets.html" class="function">fgets()</a>、<a href="function.fread.html" class="function">fread()</a> および
      <a href="function.stream-get-contents.html" class="function">stream_get_contents()</a> といった関数を
      使用することができます。
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'odbc:SAMPLE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"select&nbsp;contenttype,&nbsp;imagedata&nbsp;from&nbsp;images&nbsp;where&nbsp;id=?"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">(array(</span><span style="color: #0000BB">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$type</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_STR</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">256</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindColumn</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$lob</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_LOB</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_BOUND</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-Type:&nbsp;$type"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">fpassthru</span><span style="color: #007700">(</span><span style="color: #0000BB">$lob</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    <div class="example"><p><b>Example#13 画像をデータベースに挿入する</b></p>
     <div class="example-contents"><p>
      この例では、ファイルをオープンしてそのハンドルを PDO に渡し、
      LOB としてデータベースに挿入します。PDO は、データベースに応じた
      もっとも適切な方法でデータを取得します。
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'odbc:SAMPLE'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"insert&nbsp;into&nbsp;images&nbsp;(id,&nbsp;contenttype,&nbsp;imagedata)&nbsp;values&nbsp;(?,&nbsp;?,&nbsp;?)"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_new_id</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;新しい&nbsp;ID&nbsp;を割り当てるための何らかの関数<br /><br />//&nbsp;フォームからファイルをアップロードしていると仮定します。<br />//&nbsp;詳細な情報は&nbsp;PHP&nbsp;のドキュメントを参照ください。<br /><br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'file'</span><span style="color: #007700">][</span><span style="color: #DD0000">'tmp_name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'rb'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'file'</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_LOB</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beginTransaction</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">commit</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
   <p class="para">
    <div class="example"><p><b>Example#14 画像をデータベースに挿入する: Oracle</b></p>
     <div class="example-contents"><p>
      Oracle は、ファイルから LOB を挿入する方法が他とは少し違います。
      また、必ずトランザクション内で挿入しなければなりません。
      それ以外の場合、新しく挿入された LOB は長さゼロとなり、クエリの
      実行時に暗黙的にコミットされます。
     </p></div>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$db&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">(</span><span style="color: #DD0000">'oci:'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'scott'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'tiger'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"insert&nbsp;into&nbsp;images&nbsp;(id,&nbsp;contenttype,&nbsp;imagedata)&nbsp;"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"VALUES&nbsp;(?,&nbsp;?,&nbsp;EMPTY_BLOB())&nbsp;RETURNING&nbsp;imagedata&nbsp;INTO&nbsp;?"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_new_id</span><span style="color: #007700">();&nbsp;</span><span style="color: #FF8000">//&nbsp;新しい&nbsp;ID&nbsp;を割り当てるための何らかの関数<br /><br />//&nbsp;フォームからファイルをアップロードしていると仮定します。<br />//&nbsp;詳細な情報は&nbsp;PHP&nbsp;のドキュメントを参照ください。<br /><br /></span><span style="color: #0000BB">$fp&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">fopen</span><span style="color: #007700">(</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'file'</span><span style="color: #007700">][</span><span style="color: #DD0000">'tmp_name'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'rb'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$_FILES</span><span style="color: #007700">[</span><span style="color: #DD0000">'file'</span><span style="color: #007700">][</span><span style="color: #DD0000">'type'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bindParam</span><span style="color: #007700">(</span><span style="color: #0000BB">3</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$fp</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">PARAM_LOB</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">beginTransaction</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">commit</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

     </div>
    </p>

   </div>

   <div id="pdo.classes" class="section">
    <h2 class="title">定義済みクラス</h2>
    <div id="pdo.class.PDO" class="section">
     <h2 class="title"><span class="classname">PDO</span></h2>
     <p class="para">
      PHP とデータベースサーバの間の接続を表します。
     </p>
     <div id="pdo.class.PDO.constructor" class="section">
      <h2 class="title">コンストラクタ</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para"><a href="function.PDO-construct.html" class="link">PDO</a> - PDO オブジェクトのコンストラクタ</p>
       </li>
      </ul>
     </div>
     <div id="pdo.class.PDO.methods" class="section">
      <h2 class="title">メソッド</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para"><a href="function.PDO-beginTransaction.html" class="link">beginTransaction
        </a> - トランザクションを開始する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-commit.html" class="link">commit</a> - トランザクションを
         コミットする</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-errorCode.html" class="link">errorCode</a> -
         エラーが発生した場合に、データベースからエラーコードを取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-errorInfo.html" class="link">errorInfo</a> -
         エラーが発生した場合に、データベースからエラー情報の配列を取得する
        </p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-exec.html" class="link">exec</a> - SQL ステートメントを
         発行し、作用された行の数を返す</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-getAttribute.html" class="link">getAttribute</a> -
         データベース接続属性を取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-lastInsertId.html" class="link">lastInsertId</a> -
         テーブルに挿入された直近の行の値を取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-prepare.html" class="link">prepare</a> -
         SQL ステートメントを実行するために準備する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-rollBack.html" class="link">rollBack</a> -
         トランザクションをロールバックする</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDO-setAttribute.html" class="link">setAttribute</a> -
         データベース接続属性を設定する</p>
       </li>
      </ul>
     </div>
    </div>
    <div id="pdo.class.PDOStatement" class="section">
     <h2 class="title"><span class="classname">PDOStatement</span></h2>
     <p class="para">
      プリペアドステートメントを表します。ステートメント実行後は関連する結果セットを
      表します。
     </p>
     <div id="pdo.class.Statement.methods" class="section">
      <h2 class="title">メソッド</h2>
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-bindColumn.html" class="link">bindColumn</a> -
         PHP 変数を結果セットの出力カラムにバインドする</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-bindParam.html" class="link">bindParam</a> -
         プリペアドステートメントのパラメータに PHP 変数をバインドする</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-bindValue.html" class="link">bindValue</a> -
         プリペアドステートメントのパラメータに値をバインドする</p>
       </li>
       <li class="listitem">
        <p class="para">
         <a href="function.PDOStatement-closeCursor.html" class="link">closeCursor</a>
         - カーソルを閉じてステートメントを再実行できるようにする
        </p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-columnCount.html" class="link">columnCount</a> -
         結果セットのカラム数を返す</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-errorCode.html" class="link">errorCode</a> -
         エラーが発生した場合、ステートメントからエラーコードを取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-errorInfo.html" class="link">errorInfo</a> -
         エラーが発生した場合、ステートメントからエラー情報の配列を取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-execute.html" class="link">execute</a> -
         プリペアドステートメントを実行する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-fetch.html" class="link">fetch</a> -
         結果セットから行を取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-fetchAll.html" class="link">fetchAll</a> -
         結果セットからすべての行を含む配列を返す</p>
       </li>
       <li class="listitem">
        <p class="para">
         <a href="function.PDOStatement-fetchColumn.html" class="link">fetchColumn</a>
         結果セットの単一カラムからデータを返す
        </p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-getAttribute.html" class="link">getAttribute</a> -
         PDOStatement 属性を取得する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-getColumnMeta.html" class="link">getColumnMeta</a> -
         結果セットのカラムのメタデータを取得する</p>
       </li>
       <li class="listitem">
        <p class="para">
         <a href="function.PDOStatement-nextRowset.html" class="link">nextRowset</a> -
         次の行セット (結果セット) を取得する
        </p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-rowCount.html" class="link">rowCount</a> -
         SQL ステートメントの実行により作用された行の数を返す</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-setAttribute.html" class="link">setAttribute</a> -
         PDOStatement 属性を設定する</p>
       </li>
       <li class="listitem">
        <p class="para"><a href="function.PDOStatement-setFetchMode.html" class="link">setFetchMode</a> -
         PDOStatement の取得モードを設定する</p>
       </li>
      </ul>
     </div>
    </div>

    <div id="pdo.class.PDOException" class="section">
     <h2 class="title"><span class="classname">PDOException</span></h2>
     <p class="para">
      PDO が発するエラーを表します。あなた自身が書いたコードから
      <span class="classname">PDOException</span> をスローしてはいけません。
      PHP の例外についての詳細な情報は、
      <a href="language.exceptions.html" class="link">例外</a>
      を参照ください。
     </p>
     <div class="example">
      <p><b>Example#15 PDOException クラス</b></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">PDOException&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Exception<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$errorInfo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;PDO::errorInfo()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;あるいは&nbsp;PDOStatement::errorInfo()&nbsp;に対応します。<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$message</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;テキストのエラーメッセージ。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Exception::getMessage()&nbsp;を使用してアクセスします。<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">protected&nbsp;</span><span style="color: #0000BB">$code</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;SQLSTATE&nbsp;エラーコード。<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Exception::getCode()&nbsp;を使用してアクセスします。<br /></span><span style="color: #007700">}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </div>
    
   </div>
  



<div id="pdo.constants" class="section">
 <h2 class="title">定義済み定数</h2>
 <p class="simpara">
以下の定数が定義されています。
この関数の拡張モジュールが PHP 組み込みでコンパイルされているか、
実行時に動的にロードされている場合のみ使用可能です。
</p>
 <div class="warning"><b class="warning">警告</b>
  <p class="para">
   PHP 5.1 以降、PDO はクラス定数を使用します。
   それ以前のリリースでは、<b><tt>PDO_PARAM_BOOL</tt></b>
   の形式のグローバル変数を使用します。
  </p>
 </div>
 <dl>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_BOOL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     ブールデータ型を表します。
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_NULL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     SQL NULL データ型を表します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_INT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     SQL INTEGER データ型を表します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_STR</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     SQL CHAR, VARCHAR, または他の文字列データ型を表します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_LOB</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     SQL ラージオブジェクト型を表します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_STMT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_INPUT_OUTPUT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     パラメータがストアドプロシージャ用の入力パラメータであることを指定します。
     この値は、PDO::PARAM_* データ型とのビットORとして指定する必要があります。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_LAZY</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     取得する方法として、
     結果セットが返すカラム名と同じ名前の変数を有するオブジェクトとして各行を返す方法を
     指定します。
     PDO::FETCH_LAZY は、アクセスされたものと同じ名前のオブジェクト変数を作成します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ASSOC</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの対応するカラム名にふられているものと同じキーを付けた
     連想配列として各行を返す取得方法を指定します。
     もし結果セットが複数のカラムを同名で含む場合、
     PDO::FETCH_ASSOC はカラム名毎に 1 つの値のみ返します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_NAMED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの対応するカラム名にふられているものと同じキーを付けた
     連想配列として各行を返す取得方法を指定します。
     もし結果セットが複数のカラムを同名で含む場合、
     PDO::FETCH_NAMED はカラム名毎に値の配列を返します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_NUM</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの対応するカラム番号にふられているものと同じ添字を付けた
     配列として各行を返す取得方法を指定します。番号は0から始まります。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_BOTH</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットと同じカラム名と0から始まるカラム番号を付けた配列として各行を返す
     方法を指定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_OBJ</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットが返すカラム名と同じ名前のプロパティを有する
     オブジェクトとして各行を返す方法を指定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_BOUND</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットのカラムの値を
     <b>PDOStatement::bindParam()</b> または
     <b>PDOStatement::bindColumn()</b> メソッドでバインドされた
     PHP変数に代入し、TRUEを返すという取得方法を指定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_COLUMN</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの次の行から指定された一つのカラムのみを返す取得方法を指定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_CLASS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     カラムをクラスのプロパティにマップしつつ、
     指定されたクラスの新規インスタンスを返す取得方法を指定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_INTO</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     カラムをクラスのプロパティにマップしつつ、
     指定されたクラスの既存のインスタンスを更新する取得方法を指定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_FUNC</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_GROUP</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_UNIQUE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_KEY_PAIR</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
      最初のカラムの値をキー、それ以降のカラムの内容を値として持つ連想配列形式でデータを取得します。
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_CLASSTYPE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_SERIALIZE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     <b><tt>PDO::FETCH_INTO</tt></b> と同様ですが、
     シリアライズした文字列としてオブジェクトを提供します。
     PHP 5.1.0 以降で使用可能です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_PROPS_LATE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     PHP 5.2.0 以降で使用可能です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_AUTOCOMMIT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     この値が <b><tt>FALSE</tt></b> の場合、PDO は接続がトランザクションを開始できるように
     オートコミットを無効にしようとします。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_PREFETCH</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     独自アプリケーションにおけるメモリ使用量に対する速度のバランスを
     調整するためのプリフェッチサイズを設定します。
     全てのデータベースとドライバの組み合わせでプリフェッチサイズの設定を
     サポートしているわけではありません。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_TIMEOUT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     データベースとの通信に対するタイムアウト値を秒で設定します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_ERRMODE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_SERVER_VERSION</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_CLIENT_VERSION</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_SERVER_INFO</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_CONNECTION_STATUS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_CASE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     PDO::CASE_* 定数で指定されたケースにカラム名を変更します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_CURSOR_NAME</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_CURSOR</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_DRIVER_NAME</tt></b>
     (<a href="language.types.string.html" class="type string">string</a>)
   </span>
   <dd>

    <span class="simpara">
     ドライバ名を返します。
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_ORACLE_NULLS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     空文字を SQL の NULL 値に変換します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_PERSISTENT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     新規接続を生成するよりもむしろ持続的接続を要求します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_STATEMENT_CLASS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara"> 

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_FETCH_CATALOG_NAMES</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セット中の各カラム名にカタログ名を追加します。
     カタログ名とカラム名は、小数点 (.) で区切られます。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_FETCH_TABLE_NAMES</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セット中の各カラム名にテーブル名を追加します。
     テーブル名とカラム名は、小数点 (.) で区切られます。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_STRINGIFY_FETCHES</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara"> 

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_MAX_COLUMN_LEN</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara"> 

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_DEFAULT_FETCH_MODE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara"> 
     PHP 5.2.0 以降で使用可能です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ATTR_EMULATE_PREPARES</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     PHP 5.1.3 以降で使用可能です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERRMODE_SILENT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     エラー時にエラーもしくは例外を発生しません。
     開発者の方は明示的にエラーをチェックするようにしてください。
     これはデフォルトのモードです。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERRMODE_WARNING</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     エラーが発生した場合、PHP の E_WARNING メッセージを発行します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERRMODE_EXCEPTION</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     エラーが発生した場合、PDOException を投げます。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::CASE_NATURAL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     カラム名をデータベースドライバにより返されたままにします。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::CASE_LOWER</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     カラム名を小文字にします。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::CASE_UPPER</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     カラム名を大文字にします。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::NULL_NATURAL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::NULL_EMPTY_STRING</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::NULL_TO_STRING</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ORI_NEXT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの次の行を取得します。スクローラブルなカーソルでのみ有効です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ORI_PRIOR</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの前の行を取得します。スクローラブルなカーソルでのみ有効です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ORI_FIRST</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの先頭の行を取得します。スクローラブルなカーソルでのみ有効です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ORI_LAST</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットの最後の行を取得します。スクローラブルなカーソルでのみ有効です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ORI_ABS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットから行番号で指定した行を取得します。スクローラブルなカーソルでのみ有効です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::FETCH_ORI_REL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットのカーソルの現在の位置を基準とする相対位置により指定された行を
     取得します。スクローラブルなカーソルでのみ有効です。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::CURSOR_FWDONLY</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     前進のみ可能なカーソルを有するPDOStatementオブジェクトを生成します。
     これにより、アプリケーションの性能は改善しますが、
     PDOStatementオブジェクトは前方にある結果セットから一度に一行を
     取得するという制約を受けます。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::CURSOR_SCROLL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     スクローラブルカーソルを有するPDOStatementオブジェクトを作成しあす。
     結果セットから取得した行を制御するためのPDO::FETCH_ORI_*定数を指定して
     ください。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_CANT_MAP</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_SYNTAX</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_CONSTRAINT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_NOT_FOUND</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_ALREADY_EXISTS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_NOT_IMPLEMENTED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_MISMATCH</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_TRUNCATED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_DISCONNECTED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_NO_PERM</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">

    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::ERR_NONE</tt></b>
     (<a href="language.types.string.html" class="type string">string</a>)
   </span>
   <dd>

    <span class="simpara">
     SQLSTATE &#039;00000&#039; は SQL
     ステートメントがエラーや警告がなく発行に成功したことを意味します。
     この定数はエラーが発生したかどうかを判別するために
     <b>PDO::errorCode()</b> もしくは
     <b>PDOStatement::errorCode()</b> をチェックする際に
     便利です。この場合、通常はエラー状態を発生したメソッドからの戻りコードを
     検査することによって検知します。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_ALLOC</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     割り当てられたときに発生するイベント。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_FREE</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     割り当てが解除されたときに発生するイベント。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_EXEC_PRE</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     プリペアドステートメントの実行前に発生するイベント。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_EXEC_POST</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     プリペアドステートメントの実行後に発生するイベント。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_FETCH_PRE</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットから結果を取得する前に発生するイベント。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_FETCH_POST</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     結果セットから結果を取得した後に発生するイベント。
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>PDO::PARAM_EVT_NORMALIZE</tt></b>
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     バインドパラメータの登録時に発生するイベント。
     これにより、ドライバがパラメータ名を正規化できるようになります。
    </span>
   </dd>

  </dt>

 </dl>

</div>



  </div>
 



































































































































































































































 <h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.PDO-beginTransaction.html">PDO->beginTransaction()</a> ― トランザクションを開始する</li><li><a href="function.PDO-commit.html">PDO->commit()</a> ― トランザクションをコミットする</li><li><a href="function.PDO-construct.html">PDO->__construct()</a> ― データベースへの接続を表す PDO インスタンスを生成する</li><li><a href="function.PDO-errorCode.html">PDO->errorCode()</a> ― データベースハンドラにおける直近の操作に関連する SQLSTATE を取得する</li><li><a href="function.PDO-errorInfo.html">PDO->errorInfo()</a> ― データベースハンドラにおける直近の操作に関連する拡張エラー情報を取得する</li><li><a href="function.PDO-exec.html">PDO->exec()</a> ― SQL ステートメントを実行し、作用した行数を返す</li><li><a href="function.PDO-getAttribute.html">PDO->getAttribute()</a> ― データベース接続の属性を取得する</li><li><a href="function.PDO-getAvailableDrivers.html">PDO->getAvailableDrivers()</a> ― 利用可能な PDO ドライバの配列を返す</li><li><a href="function.PDO-lastInsertId.html">PDO->lastInsertId()</a> ― 最後に挿入された行の ID あるいはシーケンスの値を返す</li><li><a href="function.PDO-prepare.html">PDO->prepare()</a> ― 文を実行する準備を行い、文オブジェクトを返す</li><li><a href="function.PDO-query.html">PDO->query()</a> ― SQL ステートメントを実行し、結果セットを PDOStatement オブジェクトとして返す</li><li><a href="function.PDO-quote.html">PDO->quote()</a> ― クエリ用の文字列をクオートする</li><li><a href="function.PDO-rollBack.html">PDO->rollBack()</a> ― トランザクションをロールバックする</li><li><a href="function.PDO-setAttribute.html">PDO->setAttribute()</a> ― 属性を設定する</li><li><a href="function.PDOStatement-bindColumn.html">PDOStatement->bindColumn()</a> ― カラムを PHP 変数にバインドする</li><li><a href="function.PDOStatement-bindParam.html">PDOStatement->bindParam()</a> ― 指定された変数名にパラメータをバインドする</li><li><a href="function.PDOStatement-bindValue.html">PDOStatement->bindValue()</a> ― 値をパラメータにバインドする</li><li><a href="function.PDOStatement-closeCursor.html">PDOStatement->closeCursor()</a> ― カーソルを閉じてステートメントを再実行できるようにする</li><li><a href="function.PDOStatement-columnCount.html">PDOStatement->columnCount()</a> ― 結果セット中のカラム数を返す</li><li><a href="function.PDOStatement-errorCode.html">PDOStatement->errorCode()</a> ― 文ハンドラにおける直近の操作に関連する SQLSTATE を取得する</li><li><a href="function.PDOStatement-errorInfo.html">PDOStatement->errorInfo()</a> ― 文ハンドラにおける直近の操作に関連する拡張エラー情報を取得する</li><li><a href="function.PDOStatement-execute.html">PDOStatement->execute()</a> ― プリペアドステートメントを実行する</li><li><a href="function.PDOStatement-fetch.html">PDOStatement->fetch()</a> ― 結果セットから次の行を取得する</li><li><a href="function.PDOStatement-fetchAll.html">PDOStatement->fetchAll()</a> ― 全ての結果行を含む配列を返す</li><li><a href="function.PDOStatement-fetchColumn.html">PDOStatement->fetchColumn()</a> ― 結果セットの次行から単一カラムを返す</li><li><a href="function.PDOStatement-fetchObject.html">PDOStatement->fetchObject()</a> ― 次の行を取得し、それをオブジェクトとして返す</li><li><a href="function.PDOStatement-getAttribute.html">PDOStatement->getAttribute()</a> ― 文の属性を取得する</li><li><a href="function.PDOStatement-getColumnMeta.html">PDOStatement->getColumnMeta()</a> ― 結果セットのカラムに対するメタデータを返す</li><li><a href="function.PDOStatement-nextRowset.html">PDOStatement->nextRowset()</a> ― 複数の行セットを返す文ハンドラで次の行セットに移動する</li><li><a href="function.PDOStatement-rowCount.html">PDOStatement->rowCount()</a> ― 直近の SQL ステートメントによって作用した行数を返す</li><li><a href="function.PDOStatement-setAttribute.html">PDOStatement->setAttribute()</a> ― 文の属性を設定する</li><li><a href="function.PDOStatement-setFetchMode.html">PDOStatement->setFetchMode()</a> ― この文に対するデフォルトのフェッチモードを設定する</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.pdf-utf8-to-utf16.html">PDF_utf8_to_utf16</a></div>
 <div class="next" style="float: right;"><a href="function.PDO-beginTransaction.html">PDO->beginTransaction()</a></div>
 <div class="up"><a href="funcref.html">関数リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
