<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>クラス/オブジェクト関数</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.ccvs-void.html">ccvs_void</a></div>
 <div class="next" style="float: right;"><a href="function.call-user-method-array.html">call_user_method_array</a></div>
 <div class="up"><a href="funcref.html">関数リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
  <h1 class="title">クラス/オブジェクト関数</h1>
  

  <div class="partintro">
    <div id="classobj.intro" class="section">
     <h2 class="title">導入</h2>
     <p class="para">
      以下の関数により、クラスやインスタンスオブジェクトに関する情報を
      得ることが可能となります。オブジェクトが属するクラスの名前、その
      メンバープロパティ、メソッドを取得可能です。
      この関数を使用することにより、オブジェクトのクラスメンバーだけで
      なく親クラス(すなわちそのオブジェクトクラスの派生元)の情報を得る
      ことも可能です。
     </p>
    </div>

   <div id="classobj.requirements" class="section">
    <h2 class="title">要件</h2>
    <p class="para">外部ライブラリを必要としません。</p>
   </div>

   <div id="classobj.installation" class="section">
    <h2 class="title">インストール手順</h2>
    <p class="para">PHP コアに含まれるため、
追加のインストール無しで使用できます。</p>
   </div>

   <div id="classobj.configuration" class="section">
    <h2 class="title">実行時設定</h2>
    <p class="para">設定ディレクティブは定義されていません。</p>
   </div>

   <div id="classobj.resources" class="section">
    <h2 class="title">リソース型</h2>
    <p class="para">リソース型は定義されていません。</p>
   </div>

   <div id="classobj.constants" class="section">
    <h2 class="title">定義済み定数</h2>
    <p class="para">定数は定義されていません。</p>
   </div>

    <div id="classobj.examples" class="section">
     <h2 class="title">例</h2>
     <p class="para">
      この例では、まず基底クラスおよびそのクラスの派生クラスを定義しま
      す。基底クラスは食用か否か、色とかいった、一般的な野菜を記述しま
      す。サブクラス<var class="varname">Spinach</var>はその野菜の料理法と調理
      済であるかどうかの情報を追加します。
     </p>
     <p class="para">
      <div class="example">
       <p><b>Example#1 classes.inc</b></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #FF8000">//&nbsp;メンバープロパティとメソッドを有する基底クラス<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Vegetable&nbsp;</span><span style="color: #007700">{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$edible</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">Vegetable</span><span style="color: #007700">(</span><span style="color: #0000BB">$edible</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">=</span><span style="color: #DD0000">"green"</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">edible&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$edible</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">color&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$color</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">is_edible</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">edible</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">what_color</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">color</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;クラスVegetableの終り<br /><br />//&nbsp;基底クラスを拡張する<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Spinach&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Vegetable&nbsp;</span><span style="color: #007700">{<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$cooked&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">Spinach</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">Vegetable</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"green"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">cook_it</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cooked&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">is_cooked</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">cooked</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />}&nbsp;</span><span style="color: #FF8000">//&nbsp;クラスSpinachの終り<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
     <p class="para">
      続いて、これらのクラスから二つのオブジェクトのインスタンスを作成し、
      親クラスを含む情報を出力します。
      また、いくつかのユーティリティ関数を定義します。これらは主に変数
      を格好良く表示するためのものです。
     </p>
     <p class="para">
      <div class="example">
       <p><b>Example#2 test_script.php</b></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
&lt;pre&gt;<br /><span style="color: #0000BB">&lt;?php<br /><br /></span><span style="color: #007700">include&nbsp;</span><span style="color: #DD0000">"classes.inc"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;ユーティリティ関数<br /><br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">print_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">get_object_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">)&nbsp;as&nbsp;</span><span style="color: #0000BB">$prop&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$val</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\t$prop&nbsp;=&nbsp;$val\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">print_methods</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">get_class_methods</span><span style="color: #007700">(</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(</span><span style="color: #0000BB">$arr&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$method</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\tfunction&nbsp;$method()\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />function&nbsp;</span><span style="color: #0000BB">class_parentage</span><span style="color: #007700">(</span><span style="color: #0000BB">$obj</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_subclass_of</span><span style="color: #007700">(</span><span style="color: #0000BB">$GLOBALS</span><span style="color: #007700">[</span><span style="color: #0000BB">$obj</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">$class</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Object&nbsp;$obj&nbsp;belongs&nbsp;to&nbsp;class&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">($</span><span style="color: #0000BB">$obj</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&nbsp;a&nbsp;subclass&nbsp;of&nbsp;$class\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Object&nbsp;$obj&nbsp;does&nbsp;not&nbsp;belong&nbsp;to&nbsp;a&nbsp;subclass&nbsp;of&nbsp;$class\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;二つのオブジェクトのインスタンスを作成<br /><br /></span><span style="color: #0000BB">$veggie&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Vegetable</span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"blue"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$leafy&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Spinach</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;オブジェクトに関する情報を出力<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"veggie:&nbsp;CLASS&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$veggie</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"leafy:&nbsp;CLASS&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">get_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$leafy</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">",&nbsp;PARENT&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">get_parent_class</span><span style="color: #007700">(</span><span style="color: #0000BB">$leafy</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;veggieのプロパティを表示<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"\nveggie:&nbsp;プロパティ\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">print_vars</span><span style="color: #007700">(</span><span style="color: #0000BB">$veggie</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;そしてleafyのメソッドを表示<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"\nleafy:&nbsp;メソッド\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">print_methods</span><span style="color: #007700">(</span><span style="color: #0000BB">$leafy</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #DD0000">"\nParentage:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">class_parentage</span><span style="color: #007700">(</span><span style="color: #DD0000">"leafy"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Spinach"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">class_parentage</span><span style="color: #007700">(</span><span style="color: #DD0000">"leafy"</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"Vegetable"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;<br /></span>&lt;/pre&gt;</span>
</code></div>
       </div>

       <div class="example-contents"><p>
        注意すべき大事な点ですが、上記の例ではオブジェクト
        <var class="varname">$leafy</var>は
        <span class="classname">Vegetable</span>のサブクラスであるクラス
        <span class="classname">Spinach</span>のインスタンスであり、
        このスクリプトの最後の部分は以下のような出力となります。
       </p></div>
       <div class="example-contents"><pre>
<div class="cdata"><pre>
       [...]
Parentage:
Object leafy does not belong to a subclass of Spinach
Object leafy belongs to class spinach a subclass of Vegetable
</pre></div>
       </pre></div>
      </div>
     </p>
    </div>
   </div>
























































































































 <h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.call-user-method-array.html">call_user_method_array</a> ― パラメータの配列を指定してユーザメソッドをコールする[古い関数]</li><li><a href="function.call-user-method.html">call_user_method</a> ― 指定したオブジェクトのユーザーメソッドをコールする[古い関数]</li><li><a href="function.class-exists.html">class_exists</a> ― クラスが定義済みかどうかを確認する</li><li><a href="function.get-class-methods.html">get_class_methods</a> ― クラスメソッドの名前を取得する</li><li><a href="function.get-class-vars.html">get_class_vars</a> ― クラスのデフォルトプロパティを取得する</li><li><a href="function.get-class.html">get_class</a> ― オブジェクトのクラス名を返す</li><li><a href="function.get-declared-classes.html">get_declared_classes</a> ― 定義済のクラスの名前を配列として返す</li><li><a href="function.get-declared-interfaces.html">get_declared_interfaces</a> ― 宣言されている全てのインターフェースの配列を返す</li><li><a href="function.get-object-vars.html">get_object_vars</a> ― オブジェクトのプロパティを取得する</li><li><a href="function.get-parent-class.html">get_parent_class</a> ― オブジェクトの親クラスの名前を取得する</li><li><a href="function.interface-exists.html">interface_exists</a> ― インターフェースが宣言されているかどうかを確認する</li><li><a href="function.is-a.html">is_a</a> ― オブジェクトがこのクラスのものであるか、このクラスをその親クラスのひとつとしているかどうかを調べる</li><li><a href="function.is-subclass-of.html">is_subclass_of</a> ― あるオブジェクトが指定したクラスのサブクラスに属するかどうかを調べる</li><li><a href="function.method-exists.html">method_exists</a> ― クラスメソッドが存在するかどうかを確認する</li><li><a href="function.property-exists.html">property_exists</a> ― オブジェクトもしくはクラスにプロパティが存在するかどうかを調べる</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.ccvs-void.html">ccvs_void</a></div>
 <div class="next" style="float: right;"><a href="function.call-user-method-array.html">call_user_method_array</a></div>
 <div class="up"><a href="funcref.html">関数リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
