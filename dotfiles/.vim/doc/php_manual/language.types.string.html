<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>文字列</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.types.float.html">浮動小数点数</a></div>
 <div class="next" style="float: right;"><a href="language.types.array.html">配列</a></div>
 <div class="up"><a href="language.types.html">型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.types.string" class="sect1">
   <h2 class="title">文字列</h2>
   <p class="para">
    <a href="language.types.string.html" class="type string">string</a> は、文字が連結されたものです。PHP では、
    文字は 1 バイトと同じです。つまり、256 個の異なる文字を使用可能です。
    これは、PHP が Unicode をネイティブにサポートしていないことも意味します。
    いくつかの Unicode サポートについては<a href="function.utf8-encode.html" class="function">utf8_encode()</a>
    および <a href="function.utf8-decode.html" class="function">utf8_decode()</a> を参照してください。
   </p>
   <blockquote><p><b class="note">注意</b>: 
    <span class="simpara">
     文字列が非常に大きくなっても問題ありません。
     PHP に課せられる文字列のサイズの実用上の制限はありません。
     このため、長い文字列に関して恐れる必要は全くありません。
    </span>
   </p></blockquote>
   <div id="language.types.string.syntax" class="sect2">
    <h3 class="title">構文</h3>
    <p class="para">
     文字列リテラルは、3 つの異なる方法で指定することが可能です。
     <ul class="itemizedlist">

      <li class="listitem">
       <span class="simpara">
        <a href="language.types.string.html#language.types.string.syntax.single" class="link">引用符</a>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="language.types.string.html#language.types.string.syntax.double" class="link">二重引用符</a>
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        <a href="language.types.string.html#language.types.string.syntax.heredoc" class="link">ヒアドキュメント構文</a>
       </span>
      </li>

     </ul>
    </p>
    <div id="language.types.string.syntax.single" class="sect3">
     <h4 class="title">引用符</h4>
     <p class="para">
      文字列を指定する最も簡単な方法は、引用符 (文字
      <i class="literal">&#039;</i>) で括ることです。
     </p>
     <p class="para">
      引用符をリテラルとして指定するには、多くの他の言語と同様にバックスラッシュ
      (<i class="literal">\</i>) でエスケープする必要があります。
      バックスラッシュを引用符の前または文字列の最後に置きたい場合は、
      二重にする必要があります。この他の文字をエスケープする場合には、
      バックスラッシュも出力されることに注意してください! このため、
      通常はバックスラッシュ自体をエスケープする必要はありません。
      <blockquote><p><b class="note">注意</b>: 
       <span class="simpara">
        PHP 3 では、この場合、<i class="literal">E_NOTICE</i> レベルの警告が出力されます。
       </span>
      </p></blockquote>
      <blockquote><p><b class="note">注意</b>: 
       <span class="simpara">
    他の二つの構文と異なり、
        <a href="language.variables.html" class="link">変数</a>と特殊文字のエスケープシーケンスは、
        引用符 (シングルクオート) で括られた文字列にある場合には展開<em class="emphasis">されません</em>。
       </span>
      </p></blockquote>
      <div class="informalexample">
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'this&nbsp;is&nbsp;a&nbsp;simple&nbsp;string'</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;can&nbsp;also&nbsp;have&nbsp;embedded&nbsp;newlines&nbsp;in<br />strings&nbsp;this&nbsp;way&nbsp;as&nbsp;it&nbsp;is<br />okay&nbsp;to&nbsp;do'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;出力:&nbsp;Arnold&nbsp;once&nbsp;said:&nbsp;"I'll&nbsp;be&nbsp;back"<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Arnold&nbsp;once&nbsp;said:&nbsp;"I\'ll&nbsp;be&nbsp;back"'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;出力:&nbsp;You&nbsp;deleted&nbsp;C:\*.*?<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;deleted&nbsp;C:\\*.*?'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;出力:&nbsp;You&nbsp;deleted&nbsp;C:\*.*?<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'You&nbsp;deleted&nbsp;C:\*.*?'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;出力:&nbsp;This&nbsp;will&nbsp;not&nbsp;expand:&nbsp;\n&nbsp;a&nbsp;newline<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'This&nbsp;will&nbsp;not&nbsp;expand:&nbsp;\n&nbsp;a&nbsp;newline'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;出力:&nbsp;Variables&nbsp;do&nbsp;not&nbsp;$expand&nbsp;$either<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Variables&nbsp;do&nbsp;not&nbsp;$expand&nbsp;$either'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
    </div>
    <div id="language.types.string.syntax.double" class="sect3">
     <h4 class="title">二重引用符</h4>
     <p class="para">
      文字列が二重引用符 (&quot;) で括られた場合、
      PHP は、より多くの特殊文字のエスケープシーケンスを理解します。
     </p>
     <table border="5">
      <caption><b>エスケープされた文字</b></caption>
      <colgroup>

       <thead valign="middle">
    <tr valign="middle">
     <th colspan="1">記述</th>
     <th colspan="1">意味</th>
    </tr>

       </thead>

       <tbody valign="middle">
    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\n</i></td>
     <td colspan="1" rowspan="1" align="left">ラインフィード (LF またはアスキーの 0x0A (10))</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\r</i></td>
     <td colspan="1" rowspan="1" align="left">キャリッジリターン (CR またはアスキーの 0x0D (13))</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\t</i></td>
     <td colspan="1" rowspan="1" align="left">水平タブ (HT またはアスキーの 0x09 (9))</td>
    </tr>

    <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><i class="literal">\v</i></td>
         <td colspan="1" rowspan="1" align="left">垂直タブ (VT またはアスキーの 0x0B (11)) (PHP 5.2.5 以降)</td>
        </tr>

        <tr valign="middle">
         <td colspan="1" rowspan="1" align="left"><i class="literal">\f</i></td>
         <td colspan="1" rowspan="1" align="left">フォームフィード (FF またはアスキーの 0x0C (12)) (PHP 5.2.5 以降)</td>
        </tr>

        <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\\</i></td>
     <td colspan="1" rowspan="1" align="left">バックスラッシュ</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\$</i></td>
     <td colspan="1" rowspan="1" align="left">ドル記号</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\&quot;</i></td>
        <td colspan="1" rowspan="1" align="left">二重引用符</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\[0-7]{1,3}</i></td>
     <td colspan="1" rowspan="1" align="left">
      正規表現にマッチする文字シーケンスは、8 進数表記の 1 文字です。
        </td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left"><i class="literal">\x[0-9A-Fa-f]{1,2}</i></td>
     <td colspan="1" rowspan="1" align="left">
      正規表現にマッチする文字シーケンスは、16 進数表記の 1 文字です。
     </td>
    </tr>

       </tbody>
      </colgroup>

     </table>

     <p class="para">
      繰り返しますが、この他の文字をエスケープしようとした場合には、
      バックスラッシュも出力されます!
      PHP 5.1.1 より前のバージョンでは、<i class="literal">\{$var}</i>
      のバックスラッシュは出力されません。
     </p>
     <p class="para">
      しかし、二重引用符で括られた文字列で最も重要なのは、
      変数名が展開されるところです。詳細は、<a href="language.types.string.html#language.types.string.parsing" class="link">文字列のパース</a>を参照ください。
     </p>
    </div>

    <div id="language.types.string.syntax.heredoc" class="sect3">
     <h4 class="title">ヒアドキュメント</h4>
     <p class="simpara">
      文字列を区切る別の方法としてヒアドキュメント構文 (&quot;&lt;&lt;&lt;&quot;)
      があります。この場合、ある ID (と、それに続けて改行文字)
      を <i class="literal">&lt;&lt;&lt;</i>
      の後に指定し、文字列を置いた後で、同じ ID を括りを閉じるために置きます。
     </p>
     <p class="simpara">
      終端 ID は、その行の最初のカラムから始める必要があります。
      使用するラベルは、PHP の他のラベルと同様の命名規則に従う必要があります。
      つまり、英数字およびアンダースコアのみを含み、
      数字でない文字またはアンダースコアで始まる必要があります。
     </p>

     <div class="warning"><b class="warning">警告</b>
      <p class="simpara">
       非常に重要なことですが、終端 ID がある行には、セミコロン
       (<i class="literal">;</i>) 以外の他の文字が含まれていてはならないことに注意しましょう。
       これは、特に ID はインデントしてはならないということ、
       セミコロンの前に空白やタブを付けてはいけないことを意味します。
       終端 ID の前の最初の文字は、使用するオペレーティングシステムで定義された
       改行である必要があることにも注意を要します。
       これは、例えば、Macintoshでは <i class="literal">\r</i> となります。
       最後の区切り文字 (たいていはその後にセミコロンが続きます)
       の後にもまた、改行を入れる必要があります。
      </p>
      <p class="simpara">
       この規則が破られて終端 ID が &quot;clean&quot; でない場合、
       終端 ID と認識されず、PHP はさらに終端 ID を探し続けます。
       適当な終了 ID がみつからない場合、
       スクリプトの最終行でパースエラーが発生します。
      </p>
      <p class="para">
       ヒアドキュメント構文を、クラスのメンバの初期化に用いることはできません。
       他の文字列構文を利用してください。
       <div class="example">
        <p><b>Example#1 間違った例</b></p>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;</span><span style="color: #0000BB">$bar&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;EOT<br /></span><span style="color: #0000BB">bar<br /></span><span style="color: #007700">EOT;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

       </div>
      </p>
     </div>

     <p class="para">
      ヒアドキュメントは二重引用符を使用しませんが、
      二重引用符で括られた文字列と全く同様に動作します。
      しかし、この場合でも上記のリストでエスケープされたコードを使用することも可能です。
      変数は展開されますが、文字列の場合と同様に
      ヒアドキュメントの内部で複雑な変数を表わす場合には注意が必要です。
      <div class="example">
       <p><b>Example#2 ヒアドキュメントで文字列を括る例</b></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$str&nbsp;</span><span style="color: #007700">=&nbsp;&lt;&lt;&lt;EOD<br /></span><span style="color: #0000BB">Example&nbsp;of&nbsp;string<br />spanning&nbsp;multiple&nbsp;lines<br />using&nbsp;heredoc&nbsp;syntax.<br /></span><span style="color: #007700">EOD;<br /><br /></span><span style="color: #FF8000">/*&nbsp;変数を使用するより複雑な例&nbsp;*/<br /></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">foo<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$foo</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;</span><span style="color: #0000BB">$bar</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Foo'</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'Bar1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Bar2'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Bar3'</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">foo</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'MyName'</span><span style="color: #007700">;<br /><br />echo&nbsp;&lt;&lt;&lt;EOT<br /></span><span style="color: #0000BB">My&nbsp;name&nbsp;is&nbsp;"$name".&nbsp;I&nbsp;am&nbsp;printing&nbsp;some&nbsp;$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">foo.<br />Now,&nbsp;I&nbsp;am&nbsp;printing&nbsp;some&nbsp;</span><span style="color: #007700">{</span><span style="color: #0000BB">$foo</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]}</span><span style="color: #0000BB">.<br />This&nbsp;should&nbsp;print&nbsp;a&nbsp;capital&nbsp;'A':&nbsp;\x41<br /></span><span style="color: #007700">EOT;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>

     <blockquote><p><b class="note">注意</b>: 
      
       ヒアドキュメントは PHP 4 で追加されました。
      <br />
     </p></blockquote>

    </div>

    <div id="language.types.string.parsing" class="sect3">
     <h4 class="title">変数のパース</h4>
     <p class="simpara">
      スクリプトが二重引用符で括られるかヒアドキュメントで指定された場合、
      その中の変数はパースされます。
     </p>
     <p class="simpara">
      構文の型には、<a href="language.types.string.html#language.types.string.parsing.simple" class="link">単純な</a>構文と
      <a href="language.types.string.html#language.types.string.parsing.complex" class="link">複雑な
      </a>構文の 2 種類があります。簡単な構文は、最も一般的で便利です。
      この構文では、変数、配列値やオブジェクトのプロパティをパースすることが可能です。
     </p>
     <p class="simpara">
      複雑な構文は、PHP 4 で導入されました。
      この構文は、式を波括弧で括ることにより認識されます。
     </p>
     <div id="language.types.string.parsing.simple" class="sect4">
      <h1 class="title">簡単な構文</h1>
      <p class="simpara">
       ドル記号 (<i class="literal">$</i>) を見付けると、
       パーサは、有効な変数名を形成することが可能な最長のトークンを取得します。
       変数名の終りを明示的に指定したい場合は、変数名を波括弧で括ってください。
      </p>
      <div class="informalexample">
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
$beer&nbsp;=&nbsp;'Heineken';<br />echo&nbsp;"$beer's&nbsp;taste&nbsp;is&nbsp;great";&nbsp;//&nbsp;動作します。"'"&nbsp;は変数名として無効な文字です。<br />echo&nbsp;"He&nbsp;drunk&nbsp;some&nbsp;$beers";&nbsp;//&nbsp;動作しません。's'&nbsp;は、変数名として有効な文字です。<br />echo&nbsp;"He&nbsp;drunk&nbsp;some&nbsp;${beer}s";&nbsp;//&nbsp;動作します。<br />echo&nbsp;"He&nbsp;drank&nbsp;some&nbsp;{$beer}s";&nbsp;//&nbsp;動作します。</span>
</code></div>
       </div>

      </div>
      <p class="simpara">
       同様に、配列添字とオブジェクトのプロパティをパースすることも可能です。
       配列添字の場合、閉じ角括弧 (&#039;]&#039;) は添字の終りを意味し、
       オブジェクトのプロパティの場合、同じ規則が簡単な変数として適用されます。
       しかし、オブジェクトプロパティには、変数の場合のような手法はありません。

       

      </p>
      <div class="informalexample">
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;これらの例は、文字列の内部で配列を使用する際のものです。<br />//&nbsp;文字列の外部で使用する場合は、配列の文字列キーは常にクオート<br />//&nbsp;しましょう。また、{波括弧}&nbsp;も使用しないようにしましょう。<br /><br />//&nbsp;すべてのエラーを表示するようにします。<br /></span><span style="color: #0000BB">error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$fruits&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'strawberry'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'red'&nbsp;</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'banana'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yellow'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;シングルクオートの外では動作が異なることに注意してください。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;banana&nbsp;is&nbsp;$fruits[banana]."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;banana&nbsp;is&nbsp;{$fruits['banana']}."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作しますが、以下に説明するように<br />//&nbsp;PHP&nbsp;はまず&nbsp;banana&nbsp;という名前の定数を探します。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;banana&nbsp;is&nbsp;{$fruits[banana]}."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作しません。波括弧を使用しましょう。これはパースエラーとなります。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;banana&nbsp;is&nbsp;$fruits['banana']."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"A&nbsp;banana&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$fruits</span><span style="color: #007700">[</span><span style="color: #DD0000">'banana'</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;square&nbsp;is&nbsp;$square-&gt;width&nbsp;meters&nbsp;broad."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作しません。解決策については、複雑な構文を参照ください。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;square&nbsp;is&nbsp;$square-&gt;width00&nbsp;centimeters&nbsp;broad."</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

       </div>

      </div>
      <p class="simpara">
       より複雑な場合は、複雑な構文を使用する必要があります。
      </p>
     </div>

     <div id="language.types.string.parsing.complex" class="sect4">
      <h1 class="title">複雑な (波括弧) 構文</h1>
      <p class="simpara">
       この構文が「複雑(complex)な構文」と呼ばれているのは、
       構文が複雑であるからではなく、
       この方法では複雑な式を含めることができるからです。
      </p>
      <p class="simpara">
       事実、この構文により、文字列の中に名前空間内のあらゆる値を含めることが可能です。
       文字列の外側に置く場合と同様に式を書き、これを
       { と } の間に含めてください。&#039;{&#039; はエスケープすることができないため、
       この構文は $ が { のすぐ後に続く場合にのみ認識されます
       (リテラル &quot;{$&quot; を指定するには、&quot;{\$&quot; を使用してください)。
       以下のいくつかの例を見ると理解しやすくなるでしょう。
      </p>
      <div class="informalexample">
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;すべてのエラーを表示します<br /></span><span style="color: #0000BB">error_reporting</span><span style="color: #007700">(</span><span style="color: #0000BB">E_ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$great&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'fantastic'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;うまく動作しません。出力:&nbsp;This&nbsp;is&nbsp;{&nbsp;fantastic}<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;{&nbsp;$great}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;うまく動作します。出力:&nbsp;This&nbsp;is&nbsp;fantastic<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;{$great}"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;${great}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;square&nbsp;is&nbsp;{$square-&gt;width}00&nbsp;centimeters&nbsp;broad."</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;{$arr[4][3]}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;これが動作しない理由は、文字列の外で&nbsp;$foo[bar]<br />//&nbsp;が動作しない理由と同じです。<br />//&nbsp;言い換えると、これは動作するともいえます。しかし、<br />//&nbsp;PHP&nbsp;はまず最初に&nbsp;foo&nbsp;という名前の定数を探すため、<br />//&nbsp;E_NOTICE&nbsp;レベルのエラー(未定義の定数)&nbsp;となります。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;wrong:&nbsp;{$arr[foo][3]}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します。多次元配列を使用する際は、<br />//&nbsp;文字列の中では必ず配列を波括弧で囲むようにします。<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;{$arr['foo'][3]}"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;動作します<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;works:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$arr</span><span style="color: #007700">[</span><span style="color: #DD0000">'foo'</span><span style="color: #007700">][</span><span style="color: #0000BB">3</span><span style="color: #007700">];<br /><br />echo&nbsp;</span><span style="color: #DD0000">"You&nbsp;can&nbsp;even&nbsp;write&nbsp;{$obj-&gt;values[3]-&gt;name}"</span><span style="color: #007700">;<br /><br />echo&nbsp;</span><span style="color: #DD0000">"This&nbsp;is&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;var&nbsp;named&nbsp;$name:&nbsp;{${$name}}"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>

       </div>

      </div>

      <blockquote><p><b class="note">注意</b>: 
       
        関数とメソッドコールは PHP 5 から動作します。
       <br />
      </p></blockquote>
      <blockquote><p><b class="note">注意</b>: 
       
        文字列内での変数のパースは、文字列の連結に比べてよりメモリを消費します。
        メモリの使用量をできるだけ抑えた PHP スクリプトを書きたいのなら、
        変数のパースを用いるのではなく、連結演算子 (.) を使用しましょう。
       <br />
      </p></blockquote>
     </div>
    </div>

    <div id="language.types.string.substr" class="sect3">
     <h4 class="title">文字列への文字単位のアクセスと修正</h4>
     <p class="para">
      <var class="varname">$str[42]</var> のように、
      角括弧を使用してゼロから始まるオフセットを指定すると、
      文字列内の任意の文字にアクセスし、修正することが可能です。
      つまり、文字列を文字の配列として考えるわけです。
      波括弧の後に任意の文字をゼロから始まるオフセットで指定することにより、
      文字列内の文字にアクセス/修正することが可能です。
     </p>
     <blockquote><p><b class="note">注意</b>: 
      <span class="simpara">
       <var class="varname">$str{42}</var> のように波括弧を使用してアクセスすることも可能です。
       しかし、角括弧を使用する方法のほうが推奨されます。
       なぜなら、{波括弧} 形式は PHP 6 で廃止される予定だからです。
      </span>
     </p></blockquote>
     <p class="para">
      <div class="example">
       <p><b>Example#3 文字列の例</b></p>
       <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;文字列の最初の文字を取得します<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'This&nbsp;is&nbsp;a&nbsp;test.'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$first&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;文字列の&nbsp;3&nbsp;番目の文字を取得します<br /></span><span style="color: #0000BB">$third&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;文字列の最後の文字を取得します<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'This&nbsp;is&nbsp;still&nbsp;a&nbsp;test.'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$last&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">];<br /><br /></span><span style="color: #FF8000">//&nbsp;文字列の最後の文字を変更します<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'Look&nbsp;at&nbsp;the&nbsp;sea'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$str</span><span style="color: #007700">[</span><span style="color: #0000BB">strlen</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">)-</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #DD0000">'e'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;{}&nbsp;を使用した、もうひとつの方法&nbsp;(PHP&nbsp;6&nbsp;で廃止予定)&nbsp;です<br /></span><span style="color: #0000BB">$third&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">{</span><span style="color: #0000BB">2</span><span style="color: #007700">};<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
       </div>

      </div>
     </p>
     <blockquote><p><b class="note">注意</b>: 
      
       その他の型の変数に対して <i class="literal">[]</i> や <i class="literal">{}</i>
       でアクセスすると、何もメッセージを出さずに単に <b><tt>NULL</tt></b> を返します。
      <br />
     </p></blockquote>
    </div>

   </div>

   <div id="language.types.string.useful-funcs" class="sect2">
    <h3 class="title">便利な関数および演算子</h3>
    <p class="para">
     文字列は、&#039;.&#039; (ドット) 結合演算子で結合することが可能です。&#039;+&#039;
     (付加) 演算子はこの例では出てこないことに注意してください。詳細については
     <a href="language.operators.string.html" class="link">文字列演算子</a>
     を参照ください。
    </p>
    <p class="para">
     文字列の修正を行う場合には、便利な関数がたくさん用意されています。
    </p>
    <p class="simpara">
     一般的な関数については、<a href="ref.strings.html" class="link">文字列関数の節</a>
     を参照ください。高度な検索/置換を行う正規表現関数については
     <a href="ref.pcre.html" class="link">Perl</a> および
     <a href="ref.regex.html" class="link">POSIX 拡張</a> の 2 種類がありますが、
     それぞれの節を参照ください。
    </p>
    <p class="simpara">
     <a href="ref.url.html" class="link">URL 文字列用関数</a>や文字列の暗号化/
     復号用の関数 (<a href="ref.mcrypt.html" class="link">mcrypt</a> および
     <a href="ref.mhash.html" class="link">mhash</a>) もあります。
    </p>
    <p class="simpara">
     最後に、探しているものがまだ見付からない場合には、
     <a href="ref.ctype.html" class="link">文字型の関数</a>も参照ください。
    </p>
   </div>

   <div id="language.types.string.casting" class="sect2">
    <h3 class="title">文字列への変換</h3>

    <p class="para">
     <i class="literal">(string)</i> キャストや <a href="function.strval.html" class="function">strval()</a>
     関数を使って変数を文字列へ変換することができます。
     文字列型を必要とする式のスコープにおいて、文字列への変換は自動的に行われます。
     <a href="function.echo.html" class="function">echo()</a> や <a href="function.print.html" class="function">print()</a> 関数を使うとき、
     あるいは可変変数を文字列を比較するときにこの自動変換が行われます。
     マニュアルの<a href="language.types.html" class="link">型</a> と
     <a href="language.types.type-juggling.html" class="link">型の相互変換</a>
     の項を読むとわかりやすいでしょう。
     <a href="function.settype.html" class="function">settype()</a>も参照してください。
    </p>

    <p class="para">
     <a href="language.types.boolean.html" class="type boolean">boolean</a> の <b><tt>TRUE</tt></b> は文字列の <i class="literal">&quot;1&quot;</i> に、
     <b><tt>FALSE</tt></b> は <i class="literal">&quot;&quot;</i> (空文字列) に変換されます。
     これにより boolean と文字列の値を相互に変換することができます。
    </p>
    <p class="para">
     <a href="language.types.integer.html" class="type integer">integer</a> (整数) や浮動小数点数 (<a href="language.types.float.html" class="type float">float</a>) は
     その数値の数字として文字列に変換されます (指数の表記や浮動小数点数を含めて)。
     浮動小数点数は、指数表記
     (<i class="literal">4.1E+6</i>) を使用して変換されます。
    </p>
    <blockquote><p><b class="note">注意</b>: 
     
      小数点を表す文字は、スクリプトのロケール (LC_NUMERIC カテゴリ)
      によって決まります。
      <a href="function.setlocale.html" class="function">setlocale()</a> を参照ください。
     <br />
    </p></blockquote>
    <p class="para">
     配列は常に <i class="literal">&quot;Array&quot;</i> という文字列に変換されるので、
     <a href="language.types.array.html" class="type array">array</a> の中を見るために <a href="function.echo.html" class="function">echo()</a> や
     <a href="function.print.html" class="function">print()</a> を使ってダンプさせることはできません。
     一つの要素を見るためには、<i class="literal">echo $arr[&#039;foo&#039;]</i>
     のようにしてください。内容の全てをダンプ/見るためには以降の TIP をご覧ください。
    </p>
    <p class="para">
     PHP 4 のオブジェクトは、常に <i class="literal">&quot;Object&quot;</i> という文字列に変換されます。
     デバッグ等のために <a href="language.types.object.html" class="type object">object</a> の内部の変数を出力するような場合には、
     以下をご覧ください。オブジェクトがなんという名前のクラスの
     インスタンスなのかを知るには <a href="function.get-class.html" class="function">get_class()</a> をご覧ください。
    </p>
    <p class="para">
     リソースは常に <i class="literal">&quot;Resource id #1&quot;</i>
     という文字列に変換されます。<i class="literal">1</i> は実行中の
     PHP によって割り当てられる
     <a href="language.types.resource.html" class="type resource">resource</a> のユニークな番号です。
     リソースの型を知るためには <a href="function.get-resource-type.html" class="function">get_resource_type()</a>
     を使用してください。
    </p>
    <p class="para">
     <b><tt>NULL</tt></b> は常に空文字列に変換されます。
    </p>

    <p class="para">
     以上に述べたように、配列、オブジェクト、リソースをプリントアウトしても
     その値に関する有益な情報を得られるわけではありません。
     デバッグのために値を出力するのによりよい方法が知りたければ、
     <a href="function.print-r.html" class="function">print_r()</a> や
     <a href="function.var-dump.html" class="function">var_dump()</a> を参照ください。
    </p>

    <p class="para">
     PHP 変数を恒久的に保存するための文字列に変換することもできます。
     この方法はシリアライゼーションと呼ばれ、
     <a href="function.serialize.html" class="function">serialize()</a> 関数によって実現できます。
     <a href="ref.wddx.html" class="link">WDDX</a> サポートを有効にして PHP
     をセットアップすれば、PHP 変数を XML 構造にシリアライズすることもできます。
    </p>
   </div>

   <div id="language.types.string.conversion" class="sect2">
    <h3 class="title">文字列の変換</h3>

    <p class="simpara">
     数値として文字列が評価された時、結果の値と型は次のように定義されます。
    </p>
    <p class="simpara">
     文字列は、&#039;.&#039;、&#039;e&#039;、&#039;E&#039; のどれかが含まれている場合は
     <a href="language.types.float.html" class="type float">float</a>、それ以外は整数として評価されます。
    </p>
    <p class="para">
     文字列の最初の部分により値が決まります。文字列が、
     有効な数値データから始まる場合、この値が使用されます。その他の場合、
     値は 0 (ゼロ) となります。有効な数値データは符号(オプション)の後に、
     1 つ以上の数字 (オプションとして小数点を 1 つ含む)、
     オプションとして指数部が続きます。指数部は &#039;e&#039; または &#039;E&#039; の後に
     1 つ以上の数字が続く形式です。
    </p>
    <p class="simpara">
     最初の式が文字列の場合、変数の型は 2 番目の式に依存します。
    </p>
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"10.5"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;float&nbsp;です&nbsp;(11.5)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"-1.3e3"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;float&nbsp;です&nbsp;(-1299)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"bob-1.3e3"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;integer&nbsp;です&nbsp;(1)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"bob3"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;integer&nbsp;です&nbsp;(1)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"10&nbsp;Small&nbsp;Pigs"</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;integer&nbsp;です&nbsp;(11)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #DD0000">"10&nbsp;Little&nbsp;Piggies"</span><span style="color: #007700">;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;integer&nbsp;です&nbsp;(11)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"10.0&nbsp;pigs&nbsp;"&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;integer&nbsp;です&nbsp;(11)<br /></span><span style="color: #0000BB">$foo&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"10.0&nbsp;pigs&nbsp;"&nbsp;</span><span style="color: #007700">+&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;$foo&nbsp;は&nbsp;float&nbsp;です&nbsp;(11)<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    <p class="simpara">
     この変換に関する詳細は、Unix のマニュアルページで
     strtod(3) を参照ください。
    </p>
    <p class="para">
     本節の例を試したい場合、その例をカットアンドペーストしてから
     動作を確認するために次の行を挿入してください。
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"\$foo==$foo;&nbsp;type&nbsp;is&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">gettype&nbsp;</span><span style="color: #007700">(</span><span style="color: #0000BB">$foo</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;br&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
    </p>
    <p class="para">
     (C 言語で行われるように) 数値に変換することで
     一つの文字のコードを取得できると期待してはいけません。
     文字と文字コードを相互に変換するには <a href="function.ord.html" class="function">ord()</a>
     および <a href="function.chr.html" class="function">chr()</a> 関数を使用してください。
    </p>

   </div>
  </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.types.float.html">浮動小数点数</a></div>
 <div class="next" style="float: right;"><a href="language.types.array.html">配列</a></div>
 <div class="up"><a href="language.types.html">型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
