<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>接続リソースあるいはステートメントリソースのオプションを設定する</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.db2-server-info.html">db2_server_info</a></div>
 <div class="next" style="float: right;"><a href="function.db2-special-columns.html">db2_special_columns</a></div>
 <div class="up"><a href="ref.ibm-db2.html">ibm_db2</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.db2-set-option" class="refentry">
  <div class="refnamediv">
    <h1 class="refname">db2_set_option</h1>
    <p class="verinfo">(PECL ibm_db2:1.0-1.6.2)</p><p class="refpurpose">db2_set_option ― 接続リソースあるいはステートメントリソースのオプションを設定する</p>

  </div>
  <div class="refsect1 description">
    <h3 class="title">説明</h3>
    <div class="methodsynopsis">
      <span class="type">bool</span> <span class="methodname"><b><b>db2_set_option</b></b></span>
       ( <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$resource</tt></span>      
      , <span class="methodparam"><span class="type">array</span> <tt class="parameter">$options</tt></span>
      , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$type</tt></span>
     )</div>

    <p class="para">
     ステートメントリソースあるいは接続リソースのオプションを設定します。
     結果セットリソースのオプションを設定することはできません。
    </p>
  </div>

  <div class="refsect1 parameters">
    <h3 class="title">パラメータ</h3>
    <p class="para">
      <dl>

        <dt>

          <span class="term"><i><tt class="parameter">resource</tt></i>
</span>
          <dd>

            <p class="para">
             <a href="function.db2-prepare.html" class="function">db2_prepare()</a> が返す有効なステートメントリソースか、
             あるいは <a href="function.db2-connect.html" class="function">db2_connect()</a> や
             <a href="function.db2-pconnect.html" class="function">db2_pconnect()</a> が返す有効な接続リソース。
            </p>
          </dd>

        </dt>

        <dt>

          <span class="term"><i><tt class="parameter">options</tt></i>
</span>
          <dd>

            <p class="para">
             ステートメントあるいは接続のオプションを含む連想配列。
             このパラメータは、自動コミットの値を変更したりカーソルの型を
             (スクロール可能、あるいは前進のみに) 変更したり、結果セットに表示されるカラム名を
             (小文字、大文字、あるいは元のままに) 設定したりする際に使用します。
              <dl>

                <dt>

                  <span class="term"><i><tt class="parameter">autocommit</tt></i>
</span>
                  <dd>

                    <p class="para">
                     <i class="literal">DB2_AUTOCOMMIT_ON</i> を渡すと、
                     指定した接続リソースの自動コミットをオンにします。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_AUTOCOMMIT_OFF</i> を渡すと、
                     指定した接続リソースの自動コミットをオフにします。
                    </p>
                  </dd>

                </dt>

                <dt>

                  <span class="term"><i><tt class="parameter">cursor</tt></i>
</span>
                  <dd>

                    <p class="para">
                     <i class="literal">DB2_FORWARD_ONLY</i> を渡すと、
                     ステートメントリソースに前進のみのカーソルを指定します。
                     これはデフォルトのカーソル型であり、
                     すべてのデータベースサーバでサポートされています。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_SCROLLABLE</i> を渡すと、
                     ステートメントリソースにスクロール可能なカーソルを指定します。
                     このカーソルは、順番どおり以外の方法で結果セットの行にアクセス可能です。
                     しかし、IBM DB2 Universal Database でしかサポートされていません。
                    </p>
                  </dd>

                </dt>

                <dt>

                  <span class="term"><i><tt class="parameter">binmode</tt></i>
</span>
                  <dd>

                    <p class="para">
                     <i class="literal">DB2_BINARY</i> を渡すと、
                     バイナリデータがそのままの形式で返されるようになります。
                     これはデフォルトのモードです。<var class="filename">php.ini</var> で
                     <i class="literal">ibm_db2.binmode=1</i> とするのと同じことです。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_CONVERT</i> を渡すと、
                     バイナリデータを十六進エンコーディングで変換して返します。
                     これは、<var class="filename">php.ini</var> で
                     <i class="literal">ibm_db2.binmode=2</i> とするのと同じことです。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_PASSTHRU</i> を渡すと、
                     バイナリデータを <b><tt>NULL</tt></b> に変換するようになります。これは
                     <var class="filename">php.ini</var> で <i class="literal">ibm_db2.binmode=3</i>
                     とするのと同じことです。
                    </p>
                  </dd>

                </dt>

                <dt>

                  <span class="term"><i><tt class="parameter">db2_attr_case</tt></i>
</span>
                  <dd>

                    <p class="para">
                     <i class="literal">DB2_CASE_LOWER</i> を渡すと、
                     結果セットのカラム名を小文字で返します。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_CASE_UPPER</i> を渡すと、
                     結果セットのカラム名を大文字で返します。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_CASE_NATURAL</i> を渡すと、
                     結果セットのカラム名をそのまま何もせずに返します。
                    </p>
                  </dd>

                </dt>

                <dt>

                 <span class="term"><i><tt class="parameter">deferred_prepare</tt></i>
</span>
                 <dd>

                  <p class="para">
                   <i class="literal">DB2_DEFERRED_PREPARE_ON</i> を渡すと、
                   指定したステートメントリソースについて遅延プリペアを有効にします。
                  </p>
                  <p class="para">
                   <i class="literal">DB2_DEFERRED_PREPARE_OFF</i> を渡すと、
                   指定したステートメントリソースについて遅延プリペアを無効にします。
                  </p>
                 </dd>

                </dt>
                
              </dl>

            </p>
            <p class="para">
             以下の新しい i5/OS オプションは、ibm_db2 のバージョン 1.5.1 以降で使用可能です。
             <blockquote><p><b class="note">注意</b>: 
              <b>注意</b>
              
               それ以前のバージョンの ibm_db2 は、これらの新しい i5 オプションをサポートしていません。
              <br />
             </p></blockquote>
              <dl>

                <dt>

                  <span class="term"><i><tt class="parameter">i5_fetch_only</tt></i>
</span>
                  <dd>

                    <p class="para">
                     <i class="literal">DB2_I5_FETCH_ON</i> - 
                     カーソルは読み込み専用となり、場所を指定しての更新や削除には使用できません。
                     これは、<i class="literal">SQL_ATTR_FOR_FETCH_ONLY</i>
                     が <i class="literal">SQL_FALSE</i> に設定されていない場合のデフォルト設定です。
                    </p>
                    <p class="para">
                     <i class="literal">DB2_I5_FETCH_OFF</i> -
                     カーソルは、場所を指定しての更新や削除に使用できるようになります。
                    </p>
                  </dd>

                </dt>

               </dl>

            </p>
            <p class="para">
             以下の新しいオプションが、ibm_db2 バージョン 1.6.0 以降で使用可能です。
             これらは、有用な情報を提供します。これらの情報は、
             <a href="function.db2-get-option.html" class="function">db2_get_option()</a> によって取得します。
             <blockquote><p><b class="note">注意</b>: 
              <b>注意</b>
              
               以前のバージョンの ibm_db2 では、これらの新しいオプションはサポートしていません。
              <br />
              
               各オプションの値を設定する際、
               サーバによっては指定したすべての内容を処理できないことがあります。
               その場合、値が切り詰められます。
              <br />
              
               指定したオプションが正しく変換されてホストシステムに送信されることを確実にするには、
               A から Z までの文字と 0 から 9 までの数字、そしてアンダースコア
               (_) とピリオド (.) のみを使用するようにします。
              <br />
             </p></blockquote>
             <dl>

              <dt>

               <span class="term"><i><tt class="parameter">userid</tt></i>
</span>
               <dd>

                <p class="para">
                 <i class="literal">SQL_ATTR_INFO_USERID</i> -
                 ヌル終端の文字列へのポインタで、DB2 接続の際にホストデータベースサーバに送信する
                 クライアントのユーザ ID として使用します。
                 <blockquote><p><b class="note">注意</b>: 
                  <b>注意</b>
                  
                   z/OS および OS/390 サーバ版の DB2 は 16 文字までの長さをサポートしています。
                   このユーザ ID を、認証時に使用するユーザ ID と混同しないでください。
                   これは識別のためだけに使用するものであり、認証には用いられません。
                  <br />
                 </p></blockquote>
                </p>
               </dd>

              </dt>

              <dt>

               <span class="term"><i><tt class="parameter">acctstr</tt></i>
</span>
               <dd>

                <p class="para">
                 <i class="literal">SQL_ATTR_INFO_ACCTSTR</i> -
                 ヌル終端の文字列へのポインタで、DB2 接続の際にホストデータベースサーバに送信する
                 クライアントのアカウンティング・ストリングとして使用します。
                 <blockquote><p><b class="note">注意</b>: 
                  <b>注意</b>
                  
                   z/OS および OS/390 サーバ版の DB2 は 200 文字までの長さをサポートしています。
                  <br />
                 </p></blockquote>
                </p>
               </dd>

              </dt>

              <dt>

               <span class="term"><i><tt class="parameter">applname</tt></i>
</span>
               <dd>

                <p class="para">
                 <i class="literal">SQL_ATTR_INFO_APPLNAME</i> -
                 ヌル終端の文字列へのポインタで、DB2 接続の際にホストデータベースサーバに送信する
                 クライアントのアプリケーション名として使用します。
                 <blockquote><p><b class="note">注意</b>: 
                  <b>注意</b>
                  
                   z/OS および OS/390 サーバ版の DB2 は 32 文字までの長さをサポートしています。
                  <br />
                 </p></blockquote>
                </p>
               </dd>

              </dt>

              <dt>

               <span class="term"><i><tt class="parameter">wrkstnname</tt></i>
</span>
               <dd>

                <p class="para">
                 <i class="literal">SQL_ATTR_INFO_WRKSTNNAME</i> -
                 ヌル終端の文字列へのポインタで、DB2 接続の際にホストデータベースサーバに送信する
                 クライアントのワークステーション名として使用します。
                 <blockquote><p><b class="note">注意</b>: 
                  <b>注意</b>
                  
                   z/OS および OS/390 サーバ版の DB2 は 18 文字までの長さをサポートしています。
                  <br />
                 </p></blockquote>
                </p>
               </dd>

              </dt>

             </dl>

            </p>
          </dd>

        </dt>

        <dt>

          <span class="term"><i><tt class="parameter">type</tt></i>
</span>
          <dd>

            <p class="para">
             この関数に渡すリソースの型を、整数値で指定します。
             リソースの型とこの値は必ず一致していなければなりません。
              <dl>

                <dt>

                  <span class="term"><i><tt class="parameter"></span>
                  <dd>

                    <p class="para">
                     <i class="literal">1</i> は、
                     接続リソースがこの関数に渡されることを表します。
                    </p>
                    <p class="para">
                     <i class="literal">1</i> 以外の整数を指定すると、
                     ステートメントリソースがこの関数に渡されることを表します。
                    </p>
                  </dd>

                </dt>

               </dl>

            </p>
          </dd>

        </dt>

      </dl>

    </p>
    <p class="para">
    </p>
    <p class="para">
     次の表は、それぞれのオプションがどのリソース型で使用可能かをまとめたものです。
      <table border="5">
        <caption><b>リソースとパラメータの対応</b></caption>
        <colgroup>

          <col align="center" />
          <col align="center" />
          <col align="center" />
          <col align="center" />
          <col align="center" />
          
          <thead valign="middle">
            <tr valign="middle">
              <th colspan="1">キー</th>
              <th colspan="1">値</th>
              <th colspan="3">リソースの型</th>
            </tr>

          </thead>


          <tbody valign="middle">
            <tr valign="middle">
              <td class="empty">&nbsp;</td><td class="empty">&nbsp;</td><td colspan="1" rowspan="1" align="left">接続</td>
              <td colspan="1" rowspan="1" align="left">ステートメント</td>
              <td colspan="1" rowspan="1" align="left">結果セット</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">autocommit</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_AUTOCOMMIT_ON</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">autocommit</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_AUTOCOMMIT_OFF</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">cursor</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_SCROLLABLE</i></td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">cursor</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_FORWARD_ONLY</i></td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">binmode</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_BINARY</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">binmode</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_CONVERT</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">binmode</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_PASSTHRU</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">db2_attr_case</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_CASE_LOWER</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">db2_attr_case</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_CASE_UPPER</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">db2_attr_case</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_CASE_NATURAL</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">deferred_prepare</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_DEFERRED_PREPARE_ON</i></td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">deferred_prepare</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_DEFERRED_PREPARE_OFF</i></td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">i5_fetch_only</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_I5_FETCH_ON</i></td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">i5_fetch_only</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">DB2_I5_FETCH_OFF</i></td>
              <td colspan="1" rowspan="1" align="left">-</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">userid</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">SQL_ATTR_INFO_USERID</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">acctstr</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">SQL_ATTR_INFO_ACCTSTR</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">applname</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">SQL_ATTR_INFO_APPLNAME</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

            <tr valign="middle">
              <td colspan="1" rowspan="1" align="left">wrkstnname</td>
              <td colspan="1" rowspan="1" align="left"><i class="literal">SQL_ATTR_INFO_WRKSTNNAME</i></td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">X</td>
              <td colspan="1" rowspan="1" align="left">-</td>
            </tr>

          </tbody>
        </colgroup>

      </table>

    </p>
  </div>

  
  <div class="refsect1 returnvalues">
    <h3 class="title">返り値</h3>
    <p class="para">
     成功した場合に <b><tt>TRUE</tt></b> を、失敗した場合に <b><tt>FALSE</tt></b> を返します。
    </p>
  </div>

  
  
  
  <div class="refsect1 examples">
    <h3 class="title">例</h3>
    <p class="para">

      <div class="example">
        <p><b>Example#1 接続リソースにひとつのパラメータを設定する</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_ON</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;正しいリソースとオプションの配列、そして型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;すべてのオプションが正しく設定できたかどうかを調べます&nbsp;*/<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションの設定に成功しました'</span><span style="color: #007700">;<br />}<br />else<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションが設定できませんでした'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>オプションの設定に成功しました</pre></div></pre></div>
      </div>

      <div class="example">
        <p><b>Example#2 接続リソースに複数のパラメータを設定する</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'binmode'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_PASSTHRU</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'db2_attr_case'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_CASE_UPPER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_SCROLLABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;正しいリソースとオプションの配列、そして型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;すべてのオプションが正しく設定できたかどうかを調べます&nbsp;*/<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションの設定に成功しました'</span><span style="color: #007700">;<br />}<br />else<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションが設定できませんでした'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>オプションの設定に成功しました</pre></div></pre></div>
      </div>

      
      <div class="example">
        <p><b>Example#3 複数のパラメータを間違ったキーで設定する</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'MY_INVALID_KEY'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_PASSTHRU</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'db2_attr_case'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_CASE_UPPER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_SCROLLABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;正しいリソースとオプションの配列、そして型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;すべてのオプションが正しく設定できたかどうかを調べます&nbsp;*/<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションの設定に成功しました'</span><span style="color: #007700">;<br />}<br />else<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションが設定できませんでした'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>オプションが設定できませんでした</pre></div></pre></div>
      </div>

      
      <div class="example">
        <p><b>Example#4 複数のパラメータを間違った値で設定する</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'binmode'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'INVALID_VALUE'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'db2_attr_case'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_CASE_UPPER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_SCROLLABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;正しいリソースとオプションの配列、そして型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;すべてのオプションが正しく設定できたかどうかを調べます&nbsp;*/<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションの設定に成功しました'</span><span style="color: #007700">;<br />}<br />else<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションが設定できませんでした'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>オプションが設定できませんでした</pre></div></pre></div>
      </div>

      <div class="example">
        <p><b>Example#5 複数のパラメータを接続リソースに設定する (間違った型を指定する)</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'binmode'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_PASSTHRU</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'db2_attr_case'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_CASE_UPPER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_SCROLLABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;正しいリソースとオプションの配列、そして間違った型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;すべてのオプションが正しく設定できたかどうかを調べます&nbsp;*/<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションの設定に成功しました'</span><span style="color: #007700">;<br />}<br />else<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションが設定できませんでした'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>オプションが設定できませんでした</pre></div></pre></div>
      </div>

      <div class="example">
        <p><b>Example#6 複数のパラメータを間違ったリソースに設定する</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'autocommit'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_AUTOCOMMIT_OFF</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'binmode'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_PASSTHRU</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'db2_attr_case'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_CASE_UPPER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_SCROLLABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;EMPLOYEE'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;間違ったリソース、そして正しいオプションの配列と型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;すべてのオプションが正しく設定できたかどうかを調べます&nbsp;*/<br /></span><span style="color: #007700">if(</span><span style="color: #0000BB">$result</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションの設定に成功しました'</span><span style="color: #007700">;<br />}<br />else<br />{<br />&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">'オプションが設定できませんでした'</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>オプションが設定できませんでした</pre></div></pre></div>
      </div>

      <div class="example">
        <p><b>Example#7 すべてひとつにまとめる</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*&nbsp;データベース接続用のパラメータ&nbsp;*/<br /></span><span style="color: #0000BB">$database&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$hostname&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$port&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">50000</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$protocol&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'TCPIP'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$username&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$password&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続文字列&nbsp;*/<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"DRIVER={IBM&nbsp;DB2&nbsp;ODBC&nbsp;DRIVER};DATABASE=$database;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"HOSTNAME=$hostname;PORT=$port;PROTOCOL=$protocol;"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$conn_string&nbsp;</span><span style="color: #007700">.=&nbsp;</span><span style="color: #DD0000">"UID=$username;PWD=$password;"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">/*&nbsp;接続リソースを取得します&nbsp;*/<br /></span><span style="color: #0000BB">$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_string</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">''</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;有効なキーと値を使用して、オプションの連想配列を作成します&nbsp;*/<br /></span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'db2_attr_case'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_CASE_LOWER</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'cursor'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">DB2_SCROLLABLE</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;*&nbsp;FROM&nbsp;EMPLOYEE&nbsp;WHERE&nbsp;EMPNO&nbsp;=&nbsp;?&nbsp;OR&nbsp;EMPNO&nbsp;=&nbsp;?'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">/*&nbsp;正しいリソースとオプションの配列、そして型を表す値を指定して関数をコールします&nbsp;*/<br /></span><span style="color: #0000BB">$option_result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$options</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">'000130'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'000140'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">/*&nbsp;スクロール可能なカーソルのため、1&nbsp;行目より先に&nbsp;2&nbsp;行目を取得します&nbsp;*/<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">db2_fetch_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">));<br />print&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">db2_fetch_assoc</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">));<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre><div class="cdata"><pre>Array
(
    [empno] =&gt; 000140
    [firstnme] =&gt; HEATHER
    [midinit] =&gt; A
    [lastname] =&gt; NICHOLLS
    [workdept] =&gt; C01
    [phoneno] =&gt; 1793
    [hiredate] =&gt; 1976-12-15
    [job] =&gt; ANALYST
    [edlevel] =&gt; 18
    [sex] =&gt; F
    [birthdate] =&gt; 1946-01-19
    [salary] =&gt; 28420.00
    [bonus] =&gt; 600.00
    [comm] =&gt; 2274.00
)

Array
(
    [empno] =&gt; 000130
    [firstnme] =&gt; DELORES
    [midinit] =&gt; M
    [lastname] =&gt; QUINTANA
    [workdept] =&gt; C01
    [phoneno] =&gt; 4578
    [hiredate] =&gt; 1971-07-28
    [job] =&gt; ANALYST
    [edlevel] =&gt; 16
    [sex] =&gt; F
    [birthdate] =&gt; 1925-09-15
    [salary] =&gt; 23800.00
    [bonus] =&gt; 500.00
    [comm] =&gt; 1904.00
)</pre></div></pre></div>
      </div>
      <div class="example">
        <p><b>Example#8 i5/OS カーソルは読み込み専用</b></p>
        <div class="example-contents"><p>
        </p></div>
        <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$conn&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">""</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #DD0000">"i5_lib"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"nobody"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'select&nbsp;*&nbsp;from&nbsp;names&nbsp;where&nbsp;first&nbsp;=&nbsp;?'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$name&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"first2"</span><span style="color: #007700">;<br />&nbsp;&nbsp;</span><span style="color: #0000BB">db2_bind_param</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"name"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">DB2_PARAM_IN</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$options&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">"i5_fetch_only"</span><span style="color: #007700">=&gt;</span><span style="color: #0000BB">DB2_I5_FETCH_ON</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">db2_set_option</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">,</span><span style="color: #0000BB">$options</span><span style="color: #007700">,</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">db2_execute</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">db2_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"{$row[0]}&nbsp;{$row[1]}"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
        </div>

        <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
        <div class="example-contents"><pre>
<div class="cdata"><pre>
first2 last2
</pre></div>
        </pre></div>
      </div>
    </p>
  </div>

  <div class="refsect1 seealso">
    <h3 class="title">参考</h3>
    <p class="para">
      <ul class="simplelist">
        <li class="member"><a href="function.db2-connect.html" class="function">db2_connect()</a></li>
        <li class="member"><a href="function.db2-pconnect.html" class="function">db2_pconnect()</a></li>
        <li class="member"><a href="function.db2-exec.html" class="function">db2_exec()</a></li>
        <li class="member"><a href="function.db2-prepare.html" class="function">db2_prepare()</a></li>
        <li class="member"><a href="function.db2-cursor-type.html" class="function">db2_cursor_type()</a></li>
      </ul>
    </p>
  </div>

</div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.db2-server-info.html">db2_server_info</a></div>
 <div class="next" style="float: right;"><a href="function.db2-special-columns.html">db2_special_columns</a></div>
 <div class="up"><a href="ref.ibm-db2.html">ibm_db2</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
