<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>浮動小数点数</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.types.integer.html">整数</a></div>
 <div class="next" style="float: right;"><a href="language.types.string.html">文字列</a></div>
 <div class="up"><a href="language.types.html">型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.types.float" class="sect1">
   <h2 class="title">浮動小数点数</h2>
   <p class="para">
    (&quot;float&quot;, &quot;double&quot;, &quot;実数&quot; のような) 浮動小数点数は、次の構文により指定できます。
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1.234</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">1.2e3</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">7E-10</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
    規約:
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
LNUM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0-9]+<br />DNUM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;([0-9]*[\.]{LNUM})&nbsp;|&nbsp;({LNUM}[\.][0-9]*)<br />EXPONENT_DNUM&nbsp;(&nbsp;({LNUM}&nbsp;|&nbsp;{DNUM})&nbsp;[eE][+-]?&nbsp;{LNUM})</span>
</code></div>
     </div>

    </div>
    float の大きさはプラットフォーム依存です。ただし、通常はおよそ 10
    進数で 14 桁の精度があり、最大値は ~1.8e308 (これは 64ビット IEEE
    フォーマットです) となります。
   </p>

   <div class="warning"><b class="warning">警告</b>
    <h1 class="title">浮動小数点数の精度</h1>
    <p class="para">
     <i class="literal">0.1</i> や <i class="literal">0.7</i> のようなシンプルな小数であっても、
     それを内部的な二進数表現に変換する際には、どうしても多少精度が落ちてしまいます。
     その結果、不思議な結果を引き起こすことがあります。たとえば、
     <i class="literal">floor((0.1+0.7)*10)</i> の結果はたいてい
     <i class="literal">7</i> となるでしょう。おそらくは
     <i class="literal">8</i> を想定していらっしゃるでしょうが、そのようにはなりません。
     これは、(この計算結果の) 内部的な値が
     <i class="literal">7.9999999999...</i> のようになっているからです。
    </p>
    <p class="para">
     こうなる理由のひとつとして、「有限小数に変換できない分数がある」
     という事実があります。たとえば <i class="literal">1/3</i> を小数で表そうとすると
     <i class="literal">0.3333333. . .</i> となります。
    </p>
    <p class="para">
     よって、小数の最後の桁を信用してはいけませんし、
     小数が等しいという比較を行ってはいけません。より高い精度が必要な場合には、
     <a href="ref.bc.html" class="link">任意精度数学関数</a>または
     <a href="ref.gmp.html" class="link">gmp</a> 関数を代わりに使用してください。
    </p>
   </div>

   <div id="language.types.float.casting" class="sect2">
    <h3 class="title">float への変換</h3>
    <p class="para">
     文字列型がどのようにして浮動小数点数に変換されるかに関する詳細な情報は、
     <a href="language.types.string.html#language.types.string.conversion" class="link">文字列の数値型への変換</a>
     のセクションをご覧ください。
     そのほかの型の浮動小数点数への変換については、整数型への変換と同様です。
     詳細は<a href="language.types.integer.html#language.types.integer.casting" class="link">整数型への変換</a>
     のセクションをご覧ください。
     PHP 5 以降、オブジェクトを不動小数点数に変換しようとした場合には、
     通知がスローされます。
    </p>
   </div>
  </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.types.integer.html">整数</a></div>
 <div class="next" style="float: right;"><a href="language.types.string.html">文字列</a></div>
 <div class="up"><a href="language.types.html">型</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
