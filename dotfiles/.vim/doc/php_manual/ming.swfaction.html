<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>SWFAction クラス</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="ref.ming.html">Ming (flash)</a></div>
 <div class="next" style="float: right;"><a href="function.swfaction.construct.html">SWFAction->__construct()</a></div>
 <div class="up"><a href="ref.ming.html">Ming (flash)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="ming.swfaction" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">SWFAction</h1>
  <p class="verinfo">(No version information available, might be only in CVS)</p><p class="refpurpose">SWFAction ― SWFAction クラス</p>

 </div>
 <div class="refsect1 description">
  <h3 class="title">説明</h3>
  <p class="para">
   スクリプトの文法は C 言語をもとにしていますが、多くの機能が
   省略されています - SWF バイトコードマシンは、より単純であることを
   志向しています。例えば、相当手の込んだ細工をしなければ、関数のコールを
   実装することもできません。なぜなら、バイトコードの jump 命令は
   ハードコードされたオフセット値を使用しているからです。
   呼び出し元のアドレスをスタックに格納したりはしません
   - すべての関数は、戻ってくる場所を正確に知っている必要があるのです。
  </p>
  <p class="para">
   結局、どんな機能が残っているのでしょう? コンパイラが理解できるトークンは
   以下のとおりです。
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      break
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      for
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      continue
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      if
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      else
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      do
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      while
     </span>
    </li>
   </ul>
  </p>
  <p class="para">
   データ型は存在しません。SWF アクションマシンにおいては、すべての値は
   文字列として扱われます。以下の関数が使用可能です。
   <dl>

    <dt>

     <span class="term">time()</span>
     <dd>

      <span class="simpara">
       ムービーが開始してからの経過時間を、ミリ秒 (?) で返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">random(seed)</span>
     <dd>

      <span class="simpara">
       0 から seed までの範囲の擬似乱数を返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">length(expr)</span>
     <dd>

      <span class="simpara">
       指定した式の長さを返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">int(number)</span>
     <dd>

      <span class="simpara">
       指定した数値を、一番近い整数に切り下げた値を返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">concat(expr, expr)</span>
     <dd>

      <span class="simpara">
       指定した式を連結して返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">ord(expr)</span>
     <dd>

      <span class="simpara">
       指定した文字の ASCII コードを返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">chr(num)</span>
     <dd>

      <span class="simpara">
       指定した ASCII コードに対応する文字を返します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">substr(string, location, length)</span>
     <dd>

      <span class="simpara">
       指定した文字列 <i><tt class="parameter">string</tt></i>
 の、
       位置 <i><tt class="parameter">location</tt></i>
 から始まる
       長さ <i><tt class="parameter">length</tt></i>
 の部分文字列を返します。
      </span>
     </dd>

    </dt>

   </dl>

  </p>
  <p class="para">
   さらに、以下のコマンドも使用できるでしょう。
   <dl>

    <dt>

     <span class="term">duplicateClip(clip, name, depth)</span>
     <dd>

      <span class="simpara">
       指定したムービークリップ (またの名をスプライト)
       <i><tt class="parameter">clip</tt></i>
 を複製します。
       新しいムービークリップの名前は <i><tt class="parameter">name</tt></i>
 で、
       深度は <i><tt class="parameter">depth</tt></i>
 となります。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">removeClip(expr)</span>
     <dd>

      <span class="simpara">
       指定したムービークリップを削除します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">trace(expr)</span>
     <dd>

      <span class="simpara">
       指定した式をトレースログに書き込みます。ブラウザのプラグインが
       これをきちんと扱ってくれるかは疑わしいものです。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">startDrag(target, lock, [left, top, right, bottom])</span>
     <dd>

      <span class="simpara">
       ムービークリップ <i><tt class="parameter">target</tt></i>
 のドラッグを開始します。
       引数 <i><tt class="parameter">lock</tt></i>
 で、マウスをロックするかどうか (?)
       を指定します - 0 (<b><tt>FALSE</tt></b>) あるいは 1 (<b><tt>TRUE</tt></b>) を指定します。
       オプションのパラメータでは、ドラッグする範囲のを指定します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">stopDrag()</span>
     <dd>

      <span class="simpara">
       つかれきった心を落ち着かせます。そしてムービークリップの
       ドラッグも修了させます。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">callFrame(expr)</span>
     <dd>

      <span class="simpara">
       指定したフレームを関数としてコールします。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">getURL(url, target, [method])</span>
     <dd>

      <span class="simpara">
       指定した URL を読み込みます。引数 <i><tt class="parameter">target</tt></i>
 は、
       (たとえば &quot;_top&quot; や &quot;_blank&quot; のような) HTML ドキュメントの target
       に対応します。オプションの引数 <i><tt class="parameter">method</tt></i>
 は、
       サーバに変数を返したい場合に POST あるいは GET を指定します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">loadMovie(url, target)</span>
     <dd>

      <span class="simpara">
       指定した URL を読み込みます。引数 <i><tt class="parameter">target</tt></i>
 は、
       (おそらく) フレームの名前か
       あるいは特別な値 &quot;_level0&quot; (現在のムービーを置き換える) 、
       &quot;_level1&quot; (現在のムービーの前面に新しいムービーを表示する) 
       のうちのいずれかです。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">nextFrame()</span>
     <dd>

      <span class="simpara">
       次のフレームに移動します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">prevFrame()</span>
     <dd>

      <span class="simpara">
       直前の (あるいは一つ前の) フレームに移動します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">play()</span>
     <dd>

      <span class="simpara">
       ムービーの再生を開始します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">stop()</span>
     <dd>

      <span class="simpara">
       ムービーの再生を停止します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">toggleQuality()</span>
     <dd>

      <span class="simpara">
       高品質/低品質を切り替えます。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">stopSounds()</span>
     <dd>

      <span class="simpara">
       音声の再生を停止します。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">gotoFrame(num)</span>
     <dd>

      <span class="simpara">
       フレーム番号 <i><tt class="parameter">num</tt></i>
 に移動します。
       フレーム番号は 0 からはじまります。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">gotoFrame(name)</span>
     <dd>

      <span class="simpara">
       <i><tt class="parameter">name</tt></i>
 という名前のフレームに移動します。
       これは便利です。というのもまだフレームのラベルを追加していないからです。
      </span>
     </dd>

    </dt>

    <dt>

     <span class="term">setTarget(expr)</span>
     <dd>

      <span class="simpara">
       アクションのコンテキストといわれるものを設定します。
       これが何をするものなのかは実際のところよくわかりません。
      </span>
     </dd>
   
    </dt>

   </dl>

   そしてもうひとつ変なものがあります。if 文や while ループの中で、
   指定したフレーム番号が読み込まれているかどうかを調べるために、
   式 frameLoaded(num) が使用可能です。ええ。そのようにいわれています。
   しかし私は実際にこれをテストしたことがなく、実際に動作するのか
   疑問に思っています。かわりに /:framesLoaded を使用するとよいでしょう。
  </p>
  <p class="para">
    ムービークリップ (さぁみなさんご一緒に - またの名をスプライト)
    はプロパティをひじしています。すべてのプロパティが読み込み可能で、
    そのうちのいくつかには値を設定することも可能です。プロパティの
    一覧は以下のとおりです。
    <ul class="itemizedlist">
     <li class="listitem">
      <span class="simpara">
       x
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       y 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       xScale 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       yScale 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       currentFrame - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       totalFrames - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       alpha - 透明度
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       visible - 1=on, 0=off (?) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       width - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       height - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       rotation 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       target - (読み込み専用) (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       framesLoaded - (読み込み専用) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       name 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       dropTarget - (読み込み専用) (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       url - (読み込み専用) (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       highQuality - 1=high, 0=low (?) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       focusRect - (???) 
      </span>
     </li>
     <li class="listitem">
      <span class="simpara">
       soundBufTime - (???) 
      </span>
     </li>
    </ul>
    ということで、スプライトの x 位置を指定するには単に <i class="literal">/box.x = 100;</i>
    とすればよいわけです。なぜ box の前のスラッシュがあるのでしょう?
    これは、flash がムービー内のスプライトを Unix ファイルシステム風に
    管理しているからです - つまり、この場合 box がトップレベルに存在する
    ことになります。box という名前のスプライトがその中に biff という名前の
    スプライトを保持している場合、その x 位置を指定するには
    /box/biff.x = 100; とします。すくなくとも私はそう思っています。
    もし間違っていたら指摘してください。
  </p>
 </div>


 <div class="refsect1 members">
  <h3 class="title">クラスのメンバ</h3>
  <div class="refsect2 u">
   <h4 class="title">メソッド</h4>
   <ul class="simplelist">
    <li class="member"><a href="function.swfaction.construct.html" class="xref">SWFAction->__construct()</a></li>
   </ul>
  </div>

 </div>


 <div class="refsect1 examples">
  <h3 class="title">例</h3>
  <p class="para">
   この単純な例は、赤い四角形がウィンドウを横切るものです。
   <div class="example">
    <p><b>Example#1 <b>swfaction()</b> の例</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />&nbsp;&nbsp;$s&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFShape</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFill</span><span style="color: #007700">(</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setRightFill</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">movePenTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">500</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLineTo</span><span style="color: #007700">(</span><span style="color: #0000BB">500</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLineTo</span><span style="color: #007700">(</span><span style="color: #0000BB">500</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLineTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">500</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLineTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">500</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">500</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setDepth</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">5</span><span style="color: #007700">;&nbsp;++</span><span style="color: #0000BB">$n</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">rotate</span><span style="color: #007700">(-</span><span style="color: #0000BB">15</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFMovie</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setBackground</span><span style="color: #007700">(</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setDimension</span><span style="color: #007700">(</span><span style="color: #0000BB">6000</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">4000</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$p</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setDepth</span><span style="color: #007700">(</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">moveTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">500</span><span style="color: #007700">,</span><span style="color: #0000BB">2000</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #DD0000">"box"</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"/box.x&nbsp;+=&nbsp;3;"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"gotoFrame(0);&nbsp;play();"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;application/x-shockwave-flash'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">output</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   この単純な例は、画面上のマウスを追いかけます。
   <div class="example">
    <p><b>Example#2 <b>swfaction()</b> の例</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFMovie</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setRate</span><span style="color: #007700">(</span><span style="color: #0000BB">36.0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setDimension</span><span style="color: #007700">(</span><span style="color: #0000BB">1200</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">800</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setBackground</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;マウスを追いかけるスプライト&nbsp;-&nbsp;空ですが、マウスを追いかけるために<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;その&nbsp;x&nbsp;座標と&nbsp;y&nbsp;座標を取得することが可能です&nbsp;*/<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">());<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #DD0000">'mouse'</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;startDrag('/mouse',&nbsp;1);&nbsp;/*&nbsp;'1'&nbsp;は、スプライトをマウスにロックします&nbsp;*/<br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;これらは単なる四角形なので、アンチエイリアスを&nbsp;off&nbsp;にしたほうがよいでしょう&nbsp;*/<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;this.quality&nbsp;=&nbsp;0;<br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;変形ボックス&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$r&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFMorph</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getShape1</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;これは通常の図形から背景よりになることに注意しましょう。なぜかはわかりません&nbsp;*/<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setLeftFill</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFill</span><span style="color: #007700">(</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">movePenTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">40</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">40</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">80</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">80</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(-</span><span style="color: #0000BB">80</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">80</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$r</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getShape2</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setLeftFill</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFill</span><span style="color: #007700">(</span><span style="color: #0000BB">0x00</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x00</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x00</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">movePenTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">1</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(-</span><span style="color: #0000BB">2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">2</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;変形ボックスのためのスプライトコンテナ<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;これは、単にボックスを変形させる際の時間軸にすぎません&nbsp;*/<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$box&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$box</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br />&nbsp;&nbsp;&nbsp;&nbsp;stop();<br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$box</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$r</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$n</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$n</span><span style="color: #007700">&lt;=</span><span style="color: #0000BB">20</span><span style="color: #007700">;&nbsp;++</span><span style="color: #0000BB">$n</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setRatio</span><span style="color: #007700">(</span><span style="color: #0000BB">$n</span><span style="color: #007700">/</span><span style="color: #0000BB">20</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$box</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;このスプライトにより、同じアクションコードを何度も実行させることが可能となります&nbsp;*/<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$cell&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$cell</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$box</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #DD0000">'box'</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$cell</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;setTarget('box');<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;/*&nbsp;...x&nbsp;は、親の&nbsp;x&nbsp;座標を意味します。すなわち&nbsp;(..).x&nbsp;ということです&nbsp;*/<br />&nbsp;&nbsp;&nbsp;&nbsp;dx&nbsp;=&nbsp;(/mouse.x&nbsp;+&nbsp;random(6)-3&nbsp;-&nbsp;...x)/5;<br />&nbsp;&nbsp;&nbsp;&nbsp;dy&nbsp;=&nbsp;(/mouse.y&nbsp;+&nbsp;random(6)-3&nbsp;-&nbsp;...y)/5;<br />&nbsp;&nbsp;&nbsp;&nbsp;gotoFrame(int(dx*dx&nbsp;+&nbsp;dy*dy));<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$cell</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$cell</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;gotoFrame(0);<br />&nbsp;&nbsp;&nbsp;&nbsp;play();<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$cell</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;最後に、セルをムービーに追加します&nbsp;*/<br /><br />&nbsp;&nbsp;</span><span style="color: #007700">for&nbsp;(</span><span style="color: #0000BB">$x</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$x</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">12</span><span style="color: #007700">;&nbsp;++</span><span style="color: #0000BB">$x</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(</span><span style="color: #0000BB">$y</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$y</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">8</span><span style="color: #007700">;&nbsp;++</span><span style="color: #0000BB">$y</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$cell</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">moveTo</span><span style="color: #007700">(</span><span style="color: #0000BB">100</span><span style="color: #007700">*</span><span style="color: #0000BB">$x</span><span style="color: #007700">+</span><span style="color: #0000BB">50</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">100</span><span style="color: #007700">*</span><span style="color: #0000BB">$y</span><span style="color: #007700">+</span><span style="color: #0000BB">50</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;gotoFrame(1);<br />&nbsp;&nbsp;&nbsp;&nbsp;play();<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;application/x-shockwave-flash'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">output</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   上と同じですが、きれいな色のボールを使用します...
   <div class="example">
    <p><b>Example#3 <b>swfaction()</b> の例</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />&nbsp;&nbsp;$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFMovie</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setDimension</span><span style="color: #007700">(</span><span style="color: #0000BB">11000</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">8000</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setBackground</span><span style="color: #007700">(</span><span style="color: #0000BB">0x00</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x00</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x00</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />this.quality&nbsp;=&nbsp;0;<br />/frames.visible&nbsp;=&nbsp;0;<br />startDrag('/mouse',&nbsp;1);<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;マウスを追いかけるスプライト<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$t&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$t</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #DD0000">'mouse'</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$g&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFGradient</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$g</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addEntry</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$g</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addEntry</span><span style="color: #007700">(</span><span style="color: #0000BB">0.1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$g</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addEntry</span><span style="color: #007700">(</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0x5f</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$g</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addEntry</span><span style="color: #007700">(</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0xff</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;gradient&nbsp;を指定した図形<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFShape</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$f&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFill</span><span style="color: #007700">(</span><span style="color: #0000BB">$g</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">SWFFILL_RADIAL_GRADIENT</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$f</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">scaleTo</span><span style="color: #007700">(</span><span style="color: #0000BB">0.03</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setRightFill</span><span style="color: #007700">(</span><span style="color: #0000BB">$f</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">movePenTo</span><span style="color: #007700">(-</span><span style="color: #0000BB">600</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">600</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">1200</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1200</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(-</span><span style="color: #0000BB">1200</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$s</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">drawLine</span><span style="color: #007700">(</span><span style="color: #0000BB">0</span><span style="color: #007700">,&nbsp;-</span><span style="color: #0000BB">1200</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;複数の色を使用するため、スプライトにする必要があります<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$s</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;図形をここに入れ、各フレームで別の色を使用します<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"gotoFrame(random(7)+1);&nbsp;stop();"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$p</span><span style="color: #007700">);<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.75</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">multColor</span><span style="color: #007700">(</span><span style="color: #0000BB">1.0</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0.5</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1.0</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$q</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;最後に、アクションコードにこれを含めます<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">SWFSprite</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$q</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #DD0000">'frames'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />dx&nbsp;=&nbsp;(/:mousex-/:lastx)/3&nbsp;+&nbsp;random(10)-5;<br />dy&nbsp;=&nbsp;(/:mousey-/:lasty)/3;<br />x&nbsp;=&nbsp;/:mousex;<br />y&nbsp;=&nbsp;/:mousey;<br />alpha&nbsp;=&nbsp;100;<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />this.x&nbsp;=&nbsp;x;<br />this.y&nbsp;=&nbsp;y;<br />this.alpha&nbsp;=&nbsp;alpha;<br />x&nbsp;+=&nbsp;dx;<br />y&nbsp;+=&nbsp;dy;<br />dy&nbsp;+=&nbsp;3;<br />alpha&nbsp;-=&nbsp;8;<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"prevFrame();&nbsp;play();"</span><span style="color: #007700">));<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$p</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #0000BB">$p</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">setName</span><span style="color: #007700">(</span><span style="color: #DD0000">'frames'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"<br /><br />lastx&nbsp;=&nbsp;mousex;<br />lasty&nbsp;=&nbsp;mousey;<br />mousex&nbsp;=&nbsp;/mouse.x;<br />mousey&nbsp;=&nbsp;/mouse.y;<br /><br />++num;<br /><br />if&nbsp;(num&nbsp;==&nbsp;11)<br />&nbsp;&nbsp;num&nbsp;=&nbsp;1;<br /><br />removeClip('char'&nbsp;&amp;&nbsp;num);<br />duplicateClip(/frames,&nbsp;'char'&nbsp;&amp;&nbsp;num,&nbsp;num);<br /><br />&nbsp;&nbsp;"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nextFrame</span><span style="color: #007700">();<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">SWFAction</span><span style="color: #007700">(</span><span style="color: #DD0000">"prevFrame();&nbsp;play();"</span><span style="color: #007700">));<br /><br />&nbsp;&nbsp;</span><span style="color: #0000BB">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Content-type:&nbsp;application/x-shockwave-flash'</span><span style="color: #007700">);<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">output</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
 </div>

 
</div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="ref.ming.html">Ming (flash)</a></div>
 <div class="next" style="float: right;"><a href="function.swfaction.construct.html">SWFAction->__construct()</a></div>
 <div class="up"><a href="ref.ming.html">Ming (flash)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
