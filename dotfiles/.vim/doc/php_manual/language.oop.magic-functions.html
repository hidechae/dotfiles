<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>特殊関数__sleep および
    __wakeup</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.oop.serialization.html">オブジェクトのシリアル化 - セッションでのオブジェクト</a></div>
 <div class="next" style="float: right;"><a href="language.oop.newref.html">コンストラクタの内部での参照</a></div>
 <div class="up"><a href="language.oop.html">クラスとオブジェクト (PHP 4)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="language.oop.magic-functions" class="sect1">
   <h2 class="title">
    特殊関数<i class="literal">__sleep</i> および
    <i class="literal">__wakeup</i>
   </h2>
   <p class="para">
    <a href="function.serialize.html" class="function">serialize()</a> は、クラスに特殊な名前
    <i class="literal">__sleep</i> の関数があるかどうかを調べます。
    もしあれば、シリアル化の前にその関数を実行します。
    この関数で、オブジェクトをクリアすることができます。
    またこの関数は、シリアル化するオブジェクトについて、
    すべての変数の名前を配列で返すことが前提となっています。
    このメソッドが何も返さなかった場合は、<b><tt>NULL</tt></b>
    がシリアル化され、E_NOTICE が発生します。
   </p>
   
   <p class="para">
    典型的な <i class="literal">__sleep</i> の使用法は、
    途中のデータをコミットしたり、
    似たようなタスクのクリアを行うといったものです。
    また、オブジェクトが非常に大きく、かつ、完全に保存する必要がない場合、
    この関数が有用です。
   </p>
   
   <p class="para">
    逆に、 <a href="function.unserialize.html" class="function">unserialize()</a> は、特殊な名前
    <i class="literal">__wakeup</i> を有する関数が存在するかどうかを確認し
    ます。これが存在する場合、この関数は、そのオブジェクトが有する全て
    のリソースを再構築することが可能です。
   </p>
   
   <p class="para">
    典型的な<i class="literal">__wakeup</i>の使用法は、シリアル化により失っ
    たデータベース接続を全て再度復旧したり、その他の再初期化作業を実行
    したりといったものです。
   </p>
 </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.oop.serialization.html">オブジェクトのシリアル化 - セッションでのオブジェクト</a></div>
 <div class="next" style="float: right;"><a href="language.oop.newref.html">コンストラクタの内部での参照</a></div>
 <div class="up"><a href="language.oop.html">クラスとオブジェクト (PHP 4)</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
