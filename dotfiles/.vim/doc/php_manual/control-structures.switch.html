<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>switch</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="control-structures.continue.html">continue</a></div>
 <div class="next" style="float: right;"><a href="control-structures.declare.html">declare</a></div>
 <div class="up"><a href="language.control-structures.html">制御構造</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="control-structures.switch" class="sect1">
   <h2 class="title"><i class="literal">switch</i></h2>
   <p class="simpara">
    <i class="literal">switch</i>文は、同じ式を用いてIF文を並べたのに似ています。
    同じ変数を異なる値と比較し、値に応じて異なったコードを実行したいと
    思うことがしばしばあるかと思います。
    <i class="literal">switch</i>文は、まさにこのためにあるのです。
   </p>
   <blockquote><p><b class="note">注意</b>: 
    <span class="simpara">
     他の言語とは違って、
     <a href="control-structures.continue.html" class="link">continue</a>命令は
     switchにも適用され、<i class="literal">break</i>と同じ動作をします。
     ループの内部でswitchを使用しており、
     外側のループの処理を続行させたい場合には、<i class="literal">continue 2</i>
     を使用してください。
    </span>
   </p></blockquote>
   <blockquote><p><b class="note">注意</b>: 
    
     switch/case が行うのは、
     <a href="types.comparisons.html#types.comparisions-loose" class="link">緩やかな比較</a>
     であることに注意しましょう。
    <br />
   </p></blockquote>
   <p class="para">
    次の二つの例は、同じことを二つの異なった方法で書いたものです。
    一つは、<i class="literal">if</i>文を、もう一つは<i class="literal">switch</i>
    文を使っています。
   <div class="example">
    <p><b>Example#1 <i class="literal">switch</i>構造</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">if&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0に等しい"</span><span style="color: #007700">;<br />}<br />if&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは1に等しい"</span><span style="color: #007700">;<br />}<br />if&nbsp;(</span><span style="color: #0000BB">$i&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは2に等しい"</span><span style="color: #007700">;<br />}<br /><br />switch&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは1に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは2に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example">
    <p><b>Example#2 <i class="literal">switch</i>構造では文字列を使用できる</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">)&nbsp;{<br />case&nbsp;</span><span style="color: #DD0000">"apple"</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"i&nbsp;is&nbsp;apple"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #DD0000">"bar"</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"i&nbsp;is&nbsp;bar"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #DD0000">"cake"</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"i&nbsp;is&nbsp;cake"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;break;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
    失敗を避けるために<i class="literal">switch</i>文がどのように実行されるのかを
    理解することが重要です。
    <i class="literal">switch</i>文は、行毎に実行されます。
    (実際には、文毎に実行されます。)初めは、何も実行しません。
    <i class="literal">switch</i>式の値と一致する値を有する
    <i class="literal">case</i>文が見つけられたときに初めてPHにより
    命令の実行が行われます。
    PHPは<i class="literal">switch</i>ブロックの終わりまたは最初の
    <i class="literal">break</i>文まで実行を続けます。
    CASE文の終わりに<i class="literal">break</i>文を書かない場合は、PHPは
    次のCASE文を実行しつづけます。例えば、
     <div class="informalexample">
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">)&nbsp;{<br />case&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0に等しい"</span><span style="color: #007700">;<br />case&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは1に等しい"</span><span style="color: #007700">;<br />case&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは2に等しい"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="simpara">
   ここで、<var class="varname">$i</var>が0に等しい場合は、PHPは全ての echo
   文を出力してしまいます!
   <var class="varname">$i</var>が1の場合、PHPは最後の二つの echo 文を出力します。
   <var class="varname">$i</var>が2に等しい場合のみ、&#039;期待した&#039;動作をし、
   &#039;iは2に等しい&#039;と表示します。
   このため (ある種の状況下では、BREAKを付加することを避けたいと
   思うかもしれませんが)、
   <i class="literal">break</i>文を忘れないようにすることが重要です。
  </p>
  <p class="simpara">
   <i class="literal">switch</i>文では、条件は1度だけ評価され、
   その結果が各<i class="literal">case</i>文と比較されます。
   <i class="literal">elseif</i>文では、条件は、再度評価されます。
   使用する条件が単純な比較処理よりも複雑な処理を行ったり、
   重い繰り返し処理を行う場合、<i class="literal">switch</i>の方が
   より処理が速い可能性があります。
  </p>
  <p class="para">
    caseに付随する文は、空とすることが可能です。
    この場合、次のcaseに付随する文に制御が移行します。
    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">)&nbsp;{<br />case&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">:<br />case&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">:<br />case&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは3より小さいですが負ではありません"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは3です"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <i class="literal">default</i> は、case 文の特別な場合です。これは他の全ての case
   にマッチしない場合に実行されます。例を以下に示します。
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">)&nbsp;{<br />case&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは1に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは2に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />default:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0,1,2に等しくない"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
    <i class="literal">case</i>式は、スカラー型に式を評価する
    任意の式、つまり、整数、浮動小数点、文字列とすることができます。
    配列又はオブジェクトは、単純な型にキャストされていない限り
    使用することができません。
   </p>
   <p class="para">
    switch文の制御構造に関する別の構文がサポートされています。
    詳細は、<a href="control-structures.alternative-syntax.html" class="link">
    制御構造に関する別の構文</a>を参照ください。

    <div class="informalexample">
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">switch&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">):<br />case&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは1に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />case&nbsp;</span><span style="color: #0000BB">2</span><span style="color: #007700">:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは2に等しい"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;break;<br />default:<br />&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"iは0でも1でも2でもない"</span><span style="color: #007700">;<br />endswitch;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
  </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="control-structures.continue.html">continue</a></div>
 <div class="next" style="float: right;"><a href="control-structures.declare.html">declare</a></div>
 <div class="up"><a href="language.control-structures.html">制御構造</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
