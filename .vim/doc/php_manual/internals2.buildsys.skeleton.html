<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>ext_skel スクリプト</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="internals2.buildsys.html">PHP 5 ビルドシステム</a></div>
 <div class="next" style="float: right;"><a href="internals2.buildsys.configunix.html">UNIX 用のビルドシステム: config.m4</a></div>
 <div class="up"><a href="internals2.buildsys.html">PHP 5 ビルドシステム</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="internals2.buildsys.skeleton" class="sect1">
  <h2 class="title">ext_skel スクリプト</h2>
  <p class="para">
   Zend 拡張モジュールには、共通に含まれるファイルがいくつかあります。
   その多くは拡張モジュールの種類に関わらずほぼ同じ内容ですが、
   毎回それをコピーするのは面倒です。
   幸いなことに、そのような初期作業を代わりに行ってくれるスクリプトがあります。
   それが <var class="filename">ext_skel</var> で、
   PHP 4.0 以降に同梱されています。
  </p>
  
  <p class="para">
   PHP 5.2.2 で、何もパラメータを指定せずに <var class="filename">ext_skel</var>
   を実行した結果は、次のようになります。
   <div class="example-contents"><pre>
<div class="cdata"><pre>
php-5.2.2/ext$ ./ext_skel 
./ext_skel --extname=module [--proto=file] [--stubs=file] [--xml[=file]]
           [--skel=dir] [--full-xml] [--no-help]

  --extname=module   module is the name of your extension
  --proto=file       file contains prototypes of functions to create
  --stubs=file       generate only function stubs in file
  --xml              generate xml documentation to be added to phpdoc-cvs
  --skel=dir         path to the skeleton directory
  --full-xml         generate xml documentation for a self-contained extension
                     (not yet implemented)
  --no-help          don&#039;t try to be nice and create comments in the code
                     and helper functions to test if the module compiled
</pre></div>
   </pre></div>
   一般に、新しい拡張モジュールを開発する際に使うであろうパラメータは
   <i class="literal">--extname</i> と
   <i class="literal">--no-help</i> のみです。
   拡張モジュールの構成に慣れるまでは、
   <i class="literal">--no-help</i> を指定しないようにしましょう。
   そうすることで、<var class="filename">ext_skel</var>
   が生成するファイルに有用なコメントがたくさん含められるようになります。
  </p>
  
  <p class="para">
   残ったオプションは <i class="literal">--extname</i> です。
   これは、作成する拡張モジュールの名前を <var class="filename">ext_skel</var>
   に伝えるためのものです。ここで指定する名前は、すべて小文字からなるものです。
   使用できる文字は英字とアンダースコアのみで、PHP の
   <var class="filename">ext/</var> フォルダ配下で一意なものでなければなりません。
  </p>
  
  <p class="para">
   <i class="literal">--proto</i> オプションは、
   作成したい PHP 関数の情報を含むヘッダファイルを指定するためのものです。
   既存のライブラリを使用する拡張モジュールの開発時に使用できるということらしいですが、
   最近のヘッダファイルではうまく機能しないことが多いようです。
   試しに <var class="filename">zlib.h</var> を指定してみたところ、
   <var class="filename">ext_skel</var> の出力に
   空っぽで何の意味もないプロトタイプが大量に含まれてしまいました。
   <i class="literal">--xml</i> と <i class="literal">--full-xml</i>
   は、まったく機能しません。<i class="literal">--skel</i>
   を使用すると、独自の雛形ファイル群を使用することができます。
   このオプションは、このセクションでは対象外とします。
  </p>
 </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="internals2.buildsys.html">PHP 5 ビルドシステム</a></div>
 <div class="next" style="float: right;"><a href="internals2.buildsys.configunix.html">UNIX 用のビルドシステム: config.m4</a></div>
 <div class="up"><a href="internals2.buildsys.html">PHP 5 ビルドシステム</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
