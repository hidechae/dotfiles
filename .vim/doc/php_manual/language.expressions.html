<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>式</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.constants.predefined.html">自動的に定義される定数</a></div>
 <div class="next" style="float: right;"><a href="language.operators.html">演算子</a></div>
 <div class="up"><a href="langref.html">言語リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
  <h1>式</h1>

  
  <p class="simpara">
   式は、PHP における最も重要な基盤石です。PHPにおいては、
   ほとんど全てのものは式で記述されます。
   最も簡単で最も正確な式の定義は、&quot;全ての式には値がある。&quot;
   です。
  </p>
  
  <p class="simpara">  
   考えられる簡単な例は、定数と変数です。
   &quot;$a = 5&quot; と入力すると、$a に &#039;5&#039; を代入することになります。      
   &#039;5&#039; は、明らかに、 5 という値です。
   言葉を変えると &#039;5&#039; は 5 という値を有する式なのです。
   (この場合、&#039;5&#039; は整数定数です。)
  </p>
  
  <p class="simpara">
   この代入の後、$a の値は、5 であることが期待されます。
   よって、$b = $a と書いた場合、$b = 5 と書いたのと
   同じように動作することが期待されます。
   言い換えると $a は 5 という値を持つ式なのです。
   全てが正しく動作する場合、何が起こるかをこのことが正確に表現しています。
  </p>
  
  <p class="para">
   式をもう少し複雑にしたのが関数です。
   例えば、次の関数を考えてみましょう。
   
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">foo&nbsp;</span><span style="color: #007700">()&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  
  <p class="simpara">
   あなたが関数の概念に慣れていると仮定すると
   (そうでない場合は、<a href="language.functions.html" class="link">関数</a>
   に関する章を参照ください。)、
   <i class="literal">$c = foo()</i> と入力することは、
   <i class="literal">$c = 5</i> と書くことと本質的に全く同じで
   あると予想されたかもしれません。この予想は、正しいです。
   関数は、その返り値を値とする式なのです。
   foo() は 5 を返すので、式 &#039;foo()&#039; の値は 5 です。
   通常、関数は、決まった数だけを返すのではなく、何かを計算します。
  </p>
  
  <p class="simpara">
   もちろん、PHP の値は整数である必要はありませんし、
   多くの場合、そうではありません。
   PHP は、4 種類のスカラー型: 整数(<a href="language.types.integer.html" class="type integer">integer</a>)、
   浮動小数点数(<a href="language.types.float.html" class="type float">float</a>)、文字列(<a href="language.types.string.html" class="type string">string</a>)、
   真偽値(<a href="language.types.boolean.html" class="type boolean">boolean</a>) をサポートします。
   (スカラーとは、配列とかと異なり、より小さな部分に&#039;分割する&#039;ことが
   できない値のことです。)
   PHP は、2種類の複合(非スカラー)型(配列とオブジェクト)もサポートします。
   これらの型の値は、変数に代入することができ、
   関数からの返り値とすることができます。
  </p>

  <p class="simpara">
   PHP は、他の多くの言語が行うのと同じ手法で、
   更に多くの式を使用可能です。
   PHP 3 は、ほとんど全てが式であるという意味で、式指向の言語です。
   既に取り扱った &#039;$a=5&#039; という例について考えてみましょう。
   この式には、整数定数の &#039;5&#039; と 5 に更新された $a の値という
   2 つの値が現れているということに容易に気づくことでしょう。
   しかし、実際には、ここにはもうひとつの値が含まれています。
   それは、代入自体の値です。
   代入式は、それ自体、代入値を評価します。
   この場合、その値は 5 になります。
   このことは、実際には、&#039;$a = 5&#039; は、それが何をするかによらず、
   値 5 を有する式であることを意味します。 
   つまり、
   &#039;$b = ($a = 5)&#039; のように書くことは、&#039;$a = 5; $b = 5;&#039; と書くのと
   同様なのです。(セミコロンは、文の終わりを示します。)
   代入は、右から左へ実行されるため、&#039;$b = $a = 5&#039; と書くことも
   可能です。
  </p>

  <p class="simpara">
   式の配置に関する別の良い例は、前置、後置加算子、あるいは減算子です。
   PHP と他の多くの言語のユーザーは、variable++ や
   variable-- といった表記法に慣れていることでしょう。
   これらは、<a href="language.operators.increment.html" class="link">加算子および減算子</a>です。
   PHP/FI 2 においては、文 &#039;$a++&#039; は値を持ちませんでした。
   (この文は、式ではありませんでした。)
   このため、この式に代入したり、なんらかの手法でこれを使用することが
   できませんでした。
   PHP は、C 言語のようにこれらの式を同時に作ることにより
   加算子、減算子の機能を拡張しました。
   PHP においては、C 言語のように、
   前置加算と後置加算という、2 種類の加算があります。
   前置加算と後置加算は、両方とも、基本的には変数を増加させ、
   変数に対する効果は同じです。
   異なっているのは、加算する式の値です。

   前置加算は、&#039;++$variable&#039; と書かれますが、
   加算後の値を評価します。
   (PHP はその値を読む前に変数を増加させるので、&#039;前置加算(pre-increment)&#039; 
   という名前がついています。)    
   後置加算は、&#039;$variable++&#039; と書かれますが、加算される前の
   $variable の元の値を評価します。
   (PHP は、その値を読んだ後に変数を増加させるので、
   &#039;後置加算(post-increment)&#039; という名前がついています。)
  </p>
  <p class="simpara">
   <a href="language.operators.comparison.html" class="link">比較</a>演算子は、
   極めて標準的な式です。
   比較演算子は、<b><tt>FALSE</tt></b> または <b><tt>TRUE</tt></b> のどちらかを値とします。
   PHPは、&gt;(大なり)、 &gt;=(大なりイコール)、=(イコール)、
   &lt;(小なり)、&lt;=(小なりイコール)をサポートします。
   PHP 言語は、いくつかの厳密な等価演算子: ===
   (イコールかつ同じ型) そして !== (イコールではないまたは型が違う) も
   サポートします。
   これらの式は、<i class="literal">if</i>文のような条件式の内部で一般的に
   使用されます。
  </p>
  <p class="simpara">
   式の最後の例として、ここでは、演算子+代入式の複合演算式
   を扱います。
   既にご存知のように、$a に 1 を加えたい場合は、&#039;$a++&#039; または
   &#039;++$a&#039; と書くだけで十分です。
   しかし、1より大きな数、例えば 3 を加えたい場合は、どうすればよいの
   でしょう?
   &#039;$a++&#039; を複数回使うこともできますが、当然これはあまり効率的で快適な
   手法ではありません。
   多くの場合は、&#039;$a = $a + 3&#039; と書かれます。
   &#039;$a + 3&#039; は、$a + 3 の値を評価し、$a に代入します。
   この結果、$a に 3 が加えられます。
   
   PHP においては、C のような他の言語と同様に、
    この例をより短かく書くことができます。
    これにより、より明確になり、同時に理解も迅速になります。
    $a の現在の値に 3 を加える式は、 &#039;$a += 3&#039; と書くことができます。
    この式の正確な意味は、
    &quot;$a の値を取得し、それに 3 を加え、$a に再代入しなさい。&quot;
    です。
    より短く、明確になっただけでなく、実行もより高速になります。
    &#039;$a =+ 3&#039; の値は、通常の代入と同様に、代入された値です。
    この値は 3 ではなく、$a に 3 を加えた加算値
    (この値が、$a に代入された値です。)であることに注意してください。
    &#039;$a -= 5&#039; ($a から 5 を引く)や &#039;$b *= 7&#039; ($b に 7 をかける)等のように、
    全ての 2 項演算子は、この演算子+代入式のモードで使用することができます。
  </p>

  <p class="para">
   もう一種類、terniary 条件文という式がありますが、
   他の言語で見たことがない場合には理解できないかもしれません。
   
   <div class="informalexample">
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$first&nbsp;</span><span style="color: #007700">?&nbsp;</span><span style="color: #0000BB">$second&nbsp;</span><span style="color: #007700">:&nbsp;</span><span style="color: #0000BB">$third<br />?&gt;</span>
</span>
</code></div>
    </div>

   </div>

   最初の部分式の値が <b><tt>TRUE</tt></b> (非ゼロ)の場合、二番目の部分式が評価され、
    この条件文の結果となります。
   そうでない場合、三番目の部分式が評価され、この文の値となります。
  </p>
  
  <p class="para">
   次の例は、前置および後置加算子と多少一般的な式の理解を
   助けてくれることでしょう。
   
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
&lt;?php
function double($i) {
    return $i*2;
}
$b = $a = 5;        /* 値 5 を $a と $b に代入します */
$c = $a++;          /* 後置加算なので、$c に代入される値は、$a の
                       元の値 (5) です */
$e = $d = ++$b;     /* 前置加算なので、$d と $e に代入される値は、
                       加算後の $b の値 (6) です */

/* ここままで、$d と $e は、6 です */

$f = double($d++);  /* $f には、$d が加算される前の値を2倍した値、
                       つまり 2*6 = 12 が、代入されます。
$g = double(++$e);  /* $g には、$e が加算された後の値を2倍した値、
                        つまり 2*7 = 14 が、代入されます。
$h = $g += 10;      /* まず、$g に 10 が加算され、24 になります。
                       代入値 (24) は、$h に代入されます。
                       そして、$h も同様に 24 になります。 */
?&gt;
</pre></div>
    </div>

   </div>
  </p>
  
  <p class="simpara">
   式が、文として扱われることがあります。
   この場合、文は、&#039;式&#039;&#039;;&#039; 、つまり式の後にセミコロンがついた形式です。
   &#039;$b=$a=5&#039; において、$a=5 は有効な式ですが、自身を値とする文では
   ありません。しかし、&#039;$b=$a=5;&#039; は有効な文です。
  </p>
  
  <p class="simpara">
   最後に、有益な事項として式の論理値について説明します。
   多くのイベント、主に条件付き実行とループにおいて、
   式の特定な値には関心がないが、<b><tt>TRUE</tt></b> または <b><tt>FALSE</tt></b> のどちらを
   意味するかに関心があるということがあります。

   

   定数<b><tt>TRUE</tt></b>と<b><tt>FALSE</tt></b>(大文字小文字を区別しない)は、論理型の値がとり得る
   値です。必要に応じて式は論理値に変換されます。詳細な手法については、
  <a href="language.types.type-juggling.html#language.types.typecasting" class="link">型キャストに関するセクション
  </a>を参照ください。
  </p>
  <p class="simpara">
   PHP  は、完全で強力な式の実装を提供します。
   それを完全に記述することは、このマニュアルの範囲を超えています。
   上記の例は、式とは何か、そして、便利な式をどうやって作るかということ
   に関して良いアイデアを与えるに違いありません。
   本マニュアルの残りの部分では<var class="varname">expr</var>という
  マークを使用しますが、これは PHP の有効な式を意味します。
  </p>
 </div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="language.constants.predefined.html">自動的に定義される定数</a></div>
 <div class="next" style="float: right;"><a href="language.operators.html">演算子</a></div>
 <div class="up"><a href="langref.html">言語リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
