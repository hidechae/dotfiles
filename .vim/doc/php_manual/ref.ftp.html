<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>FTP 関数</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.fbsql-warnings.html">fbsql_warnings</a></div>
 <div class="next" style="float: right;"><a href="function.ftp-alloc.html">ftp_alloc</a></div>
 <div class="up"><a href="funcref.html">関数リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
 <h1 class="title">FTP 関数</h1>
 

 <div class="partintro">
  <div id="ftp.intro" class="section">
   <h2 class="title">導入</h2>
   <p class="para">
    この拡張モジュールの関数は、<a href="http://www.faqs.org/rfcs/rfc959" class="link external">&raquo; http://www.faqs.org/rfcs/rfc959</a>
    で定義された File Transfer Protocol (FTP) を使用してファイルサーバに
    アクセスするクライアントの実装です。この拡張を利用することで、FTP
    サーバにアクセスしてさまざまな操作をするスクリプトを作成することができます。
    ただ単に FTP サーバ上のファイルを読み書きしたいだけなら、
    <a href="ref.filesystem.html" class="link">ファイルシステム関数</a> で
    <a href="wrappers.ftp.html" class="link"><i class="literal">ftp://</i> ラッパ</a>
    を用いることを考えてください。こちらのほうがシンプルで直感的な
    インターフェースを提供します。
   </p>
  </div>
   
  <div id="ftp.requirements" class="section">
   <h2 class="title">要件</h2>
   <p class="para">外部ライブラリを必要としません。</p>
  </div>

  



<div id="ftp.installation" class="section">
 <h2 class="title">インストール手順</h2>
 <p class="para">
  PHP で FTP 関数を使用するには、PHP 4 をインストールする際には
  <span class="option">--enable-ftp</span> オプション、
  PHP 3 を使用する場合には <span class="option">--with-ftp</span>
  を追加する必要があります。
 </p>
 <p class="simpara">Windows 版の <i class="literal">PHP</i> には
この拡張モジュールのサポートが組み込まれています。これらの関数を使用
するために拡張モジュールを追加でロードする必要はありません。</p>
</div>




  <div id="ftp.configuration" class="section">
   <h2 class="title">実行時設定</h2>
   <p class="para">設定ディレクティブは定義されていません。</p>
  </div>

  <div id="ftp.resources" class="section">
   <h2 class="title">リソース型</h2>
   <p class="para">
    この拡張モジュールは、1 種類のリソース型を使用します。これは
    FTP 接続のリソース ID で、<a href="function.ftp-connect.html" class="function">ftp_connect()</a> あるいは
    <a href="function.ftp-ssl-connect.html" class="function">ftp_ssl_connect()</a> により返されたものです。
   </p>
  </div>

  



<div id="ftp.constants" class="section">
 <h2 class="title">定義済み定数</h2>
 <p class="simpara">
以下の定数が定義されています。
この関数の拡張モジュールが PHP 組み込みでコンパイルされているか、
実行時に動的にロードされている場合のみ使用可能です。
</p>
 <dl>

  <dt>

   <span class="term">
    <b><tt>FTP_ASCII</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para"/>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_TEXT</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para"/>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_BINARY</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para"/>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_IMAGE</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para"/>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_TIMEOUT_SEC</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para">
     詳細は、<a href="function.ftp-set-option.html" class="function">ftp_set_option()</a> を参照ください。
    </p>
   </dd>

  </dt>

 </dl>

 <p class="para">
  以下の定数は、PHP 4.3.0で追加されました。
 </p>
 <dl>

  <dt>

   <span class="term">
    <b><tt>FTP_AUTOSEEK</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para">
     詳細は、<a href="function.ftp-set-option.html" class="function">ftp_set_option()</a> を参照してください。
    </p>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_AUTORESUME</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para">
     GET および PUT リクエスト用のレジューム位置と開始位置を自動的に
     定義します（FTP_AUTOSEEK が有効な場合のみ動作します）。
    </p>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_FAILED</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para">
     非同期伝送が失敗しました。
    </p>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_FINISHED</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para">
     非同期伝送が終了しました。
    </p>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>FTP_MOREDATA</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <p class="para">
     非同期伝送がまだアクティブです。
    </p>
   </dd>

  </dt>

 </dl>

</div>



   
  <div id="ftp.examples" class="section">
   <h2 class="title">例</h2>
   <p class="para">
    <div class="example">
     <p><b>Example#1 FTP の例</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;接続を確立する<br /></span><span style="color: #0000BB">$conn_id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_connect</span><span style="color: #007700">(</span><span style="color: #0000BB">$ftp_server</span><span style="color: #007700">);&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;ユーザ名とパスワードでログインする<br /></span><span style="color: #0000BB">$login_result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_login</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_name</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$ftp_user_pass</span><span style="color: #007700">);&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;接続できたか確認する<br /></span><span style="color: #007700">if&nbsp;((!</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">)&nbsp;||&nbsp;(!</span><span style="color: #0000BB">$login_result</span><span style="color: #007700">))&nbsp;{&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"FTP&nbsp;connection&nbsp;has&nbsp;failed!"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Attempted&nbsp;to&nbsp;connect&nbsp;to&nbsp;$ftp_server&nbsp;for&nbsp;user&nbsp;$ftp_user_name"</span><span style="color: #007700">;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Connected&nbsp;to&nbsp;$ftp_server,&nbsp;for&nbsp;user&nbsp;$ftp_user_name"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br /></span><span style="color: #FF8000">//&nbsp;ファイルをアップロードする<br /></span><span style="color: #0000BB">$upload&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ftp_put</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$destination_file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$source_file</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">FTP_BINARY</span><span style="color: #007700">);&nbsp;<br /><br /></span><span style="color: #FF8000">//&nbsp;アップロード状況を確認する<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">$upload</span><span style="color: #007700">)&nbsp;{&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"FTP&nbsp;upload&nbsp;has&nbsp;failed!"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Uploaded&nbsp;$source_file&nbsp;to&nbsp;$ftp_server&nbsp;as&nbsp;$destination_file"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br /></span><span style="color: #FF8000">//&nbsp;FTP&nbsp;ストリームを閉じる<br /></span><span style="color: #0000BB">ftp_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn_id</span><span style="color: #007700">);&nbsp;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </p>
  </div>
 </div>

 









































































































































































































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="function.ftp-alloc.html">ftp_alloc</a> ― アップロードされるファイルのためのスペースを確保する</li><li><a href="function.ftp-cdup.html">ftp_cdup</a> ― 親ディレクトリに移動する</li><li><a href="function.ftp-chdir.html">ftp_chdir</a> ― FTP サーバ上でディレクトリを移動する</li><li><a href="function.ftp-chmod.html">ftp_chmod</a> ― FTP 経由でファイルのパーミッションを設定する</li><li><a href="function.ftp-close.html">ftp_close</a> ― FTP 接続を閉じる</li><li><a href="function.ftp-connect.html">ftp_connect</a> ― FTP 接続をオープンする</li><li><a href="function.ftp-delete.html">ftp_delete</a> ― FTP サーバ上のファイルを削除する</li><li><a href="function.ftp-exec.html">ftp_exec</a> ― FTP サーバ上でのコマンドの実行をリクエストする</li><li><a href="function.ftp-fget.html">ftp_fget</a> ― FTP サーバからファイルをダウンロードし、オープン中のファイルに保存する</li><li><a href="function.ftp-fput.html">ftp_fput</a> ― オープン中のファイルを FTP サーバにアップロードする</li><li><a href="function.ftp-get-option.html">ftp_get_option</a> ― カレント FTP ストリームでの種々の実行時動作を取得する</li><li><a href="function.ftp-get.html">ftp_get</a> ― FTP サーバからファイルをダウンロードする</li><li><a href="function.ftp-login.html">ftp_login</a> ― FTP 接続にログインする</li><li><a href="function.ftp-mdtm.html">ftp_mdtm</a> ― 指定したファイルが最後に更新された時刻を返す</li><li><a href="function.ftp-mkdir.html">ftp_mkdir</a> ― ディレクトリを作成する</li><li><a href="function.ftp-nb-continue.html">ftp_nb_continue</a> ― ファイルの取得/送信を継続する（非ブロッキング）</li><li><a href="function.ftp-nb-fget.html">ftp_nb_fget</a> ― FTP サーバからファイルをダウンロードし、オープン中のファイルに保存する（非ブロッキング）</li><li><a href="function.ftp-nb-fput.html">ftp_nb_fput</a> ― オープン中のファイルを FTP サーバに保存する（非ブロッキング）</li><li><a href="function.ftp-nb-get.html">ftp_nb_get</a> ― FTP サーバからファイルを取得し、ローカルファイルに書き込む（非ブロッキング）</li><li><a href="function.ftp-nb-put.html">ftp_nb_put</a> ― FTP サーバにファイルを保存する（非ブロッキング）</li><li><a href="function.ftp-nlist.html">ftp_nlist</a> ― 指定したディレクトリのファイルの一覧を返す</li><li><a href="function.ftp-pasv.html">ftp_pasv</a> ― パッシブモードをオンまたはオフにする</li><li><a href="function.ftp-put.html">ftp_put</a> ― FTP サーバにファイルをアップロードする</li><li><a href="function.ftp-pwd.html">ftp_pwd</a> ― カレントのディレクトリ名を返す</li><li><a href="function.ftp-quit.html">ftp_quit</a> ― ftp_close のエイリアス</li><li><a href="function.ftp-raw.html">ftp_raw</a> ― FTP サーバに任意のコマンドを送信する</li><li><a href="function.ftp-rawlist.html">ftp_rawlist</a> ― 指定したディレクトリの詳細なファイル一覧を返す</li><li><a href="function.ftp-rename.html">ftp_rename</a> ― FTP サーバ上のファイルまたはディレクトリの名前を変更する</li><li><a href="function.ftp-rmdir.html">ftp_rmdir</a> ― ディレクトリを削除する</li><li><a href="function.ftp-set-option.html">ftp_set_option</a> ― さまざまな FTP 実行時オプションを設定する</li><li><a href="function.ftp-site.html">ftp_site</a> ― SITEコマンドをサーバに送信する</li><li><a href="function.ftp-size.html">ftp_size</a> ― 指定したファイルのサイズを返す</li><li><a href="function.ftp-ssl-connect.html">ftp_ssl_connect</a> ― セキュアな SSL-FTP 接続をオープンする</li><li><a href="function.ftp-systype.html">ftp_systype</a> ― リモート FTP サーバのシステム型 ID を返す</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.fbsql-warnings.html">fbsql_warnings</a></div>
 <div class="next" style="float: right;"><a href="function.ftp-alloc.html">ftp_alloc</a></div>
 <div class="up"><a href="funcref.html">関数リファレンス</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
